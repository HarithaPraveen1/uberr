"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[16673],{11844:(e,t,r)=>{function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.Z=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if("default"!==d&&Object.prototype.hasOwnProperty.call(e,d)){var l=a?Object.getOwnPropertyDescriptor(e,d):null;l&&(l.get||l.set)?Object.defineProperty(n,d,l):n[d]=e[d]}n.default=e,r&&r.set(e,n);return n}(r(43193)),a=["title","titleId","size"];function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=n.forwardRef((function(e,t){var r=e.title,i=void 0===r?"Pencil":r,o=e.titleId,s=e.size,u=void 0===s?"1em":s,c=l(e,a);return n.createElement("svg",d({width:u,height:u,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o},c),void 0===i?n.createElement("title",{id:o},"Pencil"):i?n.createElement("title",{id:o},i):null,n.createElement("path",{d:"m14.4 6.6 3 3L5 22H2v-3L14.4 6.6Z",fill:"currentColor"}),",",n.createElement("path",{d:"m19.071 1.99-2.475 2.474 2.97 2.97 2.475-2.475-2.97-2.97Z",fill:"currentColor"}))}));t.Z=s},13597:(e,t,r)=>{r.d(t,{a:()=>_,Z:()=>I});var i=r(18805),n=r(97802),a=r(80903),o=r(78519),d=r(21954),l=r(58980),s=r(70300),u=r(85019),c=r(75057),p=r(72403),g=r(9266),h=r(33990);const m=()=>{const e=(0,l.TH)();return(0,h.BX)(g.Bi,{$as:i.rU,to:(0,p.vN_)(e,"shareGroupOrder"),children:[(0,h.tZ)(u.Z,{type:"People",width:"16px",height:"16px"}),(0,h.tZ)(c.sA,{}),(0,h.tZ)(s.v,{id:"go.add_people"})]})};var f=r(2429),v=r(97174),Z=r(503),O=r(17308),y=r(54235),b=r(48899),U=r(84610);const C=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentNegative,justifyContent:"center",display:"flex"}})),_=e=>{let{gutterWidth:t}=e;return(0,h.tZ)(b.Z,{$margin:"0 ".concat(-1*(t||0),"px"),$height:"1px"})},I=e=>{var t,r,n;let{showAddGuestsBtn:u=!0,...c}=e;const{inCartActionsXP:g}=(0,U.Z)(),{isDraftOrderParticipant:b,isDraftOrderCreator:_,isDraftOrderCartLocked:I}=(0,d.Z)(),{serverCart:x}=(0,v.iQ)(),{store:D}=(0,f.Z)(null===(t=x.data)||void 0===t?void 0:t.storeUuid),k=(0,Z.Z)(),w=(0,l.TH)();return(0,h.BX)(h.HY,{children:[u?(0,h.BX)(h.HY,{children:[(0,h.tZ)(O.ZP,{$height:16}),(0,h.tZ)(m,{})]}):null,(0,h.tZ)(a.Z,{storeUuid:(null===(r=D.data)||void 0===r?void 0:r.uuid)||"",storeSlug:(null===(n=D.data)||void 0===n?void 0:n.slug)||"",gutterWidth:c.gutterWidth||0,updateItemQuantity:k,getItemClickUrl:(e,t)=>{var r,i;return _||t?(0,p.lVP)(w,{itemUuid:e.shoppingCartItemUuid}):(0,p.yz4)({location:w,args:{storeUuid:(null===(r=D.data)||void 0===r?void 0:r.uuid)||"",storeSlug:(null===(i=D.data)||void 0===i?void 0:i.slug)||"",sectionUuid:e.sectionUuid,subsectionUuid:e.subsectionUuid,itemUuid:e.uuid}})}}),!b||I||g?(0,h.tZ)(y.Z,{store:D}):(0,h.BX)(h.HY,{children:[(0,h.tZ)(O.ZP,{$height:24}),(0,h.tZ)(o.Z,{})]}),_&&D.data&&!g?(0,h.BX)(h.HY,{children:[(0,h.tZ)(O.ZP,{$height:24}),(0,h.tZ)(C,{$as:i.rU,to:(0,p.vN_)(w,"cancelGroupOrder"),children:(0,h.tZ)(s.v,{id:"go.cancel_group_order"})})]}):null,(0,h.tZ)(O.ZP,{$height:48})]})}},54235:(e,t,r)=>{r.d(t,{Z:()=>q});var i=r(36151),n=r(97802),a=r(23773),o=r(47451),d=r(19474),l=r(28398),s=r(11183),u=r(8070),c=r(33990);const p=(0,n.zo)("div",(e=>{let{$theme:t,$margin:r}=e;return{background:t.colors.backgroundSecondary,padding:"16px",margin:r||"24px 0 0 0"}})),g=(0,n.zo)("div",{flex:1}),h=(0,n.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelMedium})),m=e=>{let{margin:t,isSingleUseItemsIncluded:r,onChange:i,label:n}=e;return(0,c.tZ)(p,{$margin:t,children:(0,c.tZ)(o.Z,{name:"utensil",id:"utensil",isChecked:r,onChange:i,reverse:!0,children:(0,c.tZ)(g,{children:(0,c.tZ)(h,{children:n})})})})},f=e=>{var t,r;const n=(0,a.T)(),o=(0,d.ZP)(),p=(0,l.v)((e=>{let{checkout:t}=e;return t&&t.isSingleUseItemsIncluded})),[g,h]=(0,i.useState)(Boolean(p)),f=(0,s.I0)(),v=()=>{const e=!g;f((0,u.qx)(e)),h(e),o("eats:click_request_utensils",{option:e?"yes":"no"})};return e.showUtensils?(0,c.tZ)(m,{margin:e.margin,onChange:v,isSingleUseItemsIncluded:g,label:n("shared.request_utensils")}):null!==(t=e.store)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.singleUseItemsInfo?(0,c.tZ)(m,{margin:e.margin,onChange:v,isSingleUseItemsIncluded:g,label:null!==(Z=null===(O=e.store)||void 0===O||null===(y=O.data)||void 0===y||null===(b=y.singleUseItemsInfo)||void 0===b?void 0:b.title)&&void 0!==Z?Z:""}):null;var Z,O,y,b};var v=r(47706),Z=r(11844),O=r(17308),y=r(53156),b=r(51126),U=r(60938),C=r(53642),_=r(21954),I=r(16642),x=r(46119),D=r(97174),k=r(51301);const w="0.5s",B=(0,n.zo)("div",(e=>{let{$theme:t,$isOpen:r}=e;return{background:t.overlays.full.background.replace("0.8","0.4"),width:r?"100vw":0,height:r?"100%":0,position:"fixed",top:0,right:0,zIndex:x.I_.banner,display:"flex",justifyContent:"center",alignItems:"flex-start",overflowY:"hidden",WebkitOverflowScrolling:"touch",opacity:r?1:0,transition:"opacity ".concat(w," ease-in-out")}})),S=(0,n.zo)("div",(e=>{let{$theme:t,$isOpen:r}=e;return{position:"fixed",bottom:r?"0":"-100%",left:0,marginTop:"0",zIndex:r?x.I_.banner:x.I_.background,backgroundColor:t.colors.backgroundPrimary,width:"100%",display:"flex",flexDirection:"column",transition:"opacity ".concat(w," ease-in-out, bottom ").concat(w," ease-in-out"),borderRadius:"16px 16px 0 0",[t.mediaQuery.medium]:{position:"static",bottom:"0",marginTop:"10vh",width:"478px",borderRadius:"0"}}})),P=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"none",[t.mediaQuery.medium]:{display:"flex",justifyContent:"flex-end",zIndex:x.I_.cover,width:"100%",height:"48px",position:"relative"}}})),T=(0,n.zo)("div",{padding:"0",display:"flex",flexDirection:"column",alignItems:"stretch"}),M=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{padding:"16px 24px 0",marginBottom:"16px",[t.mediaQuery.medium]:{marginBottom:0}}})),$=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"2px solid ".concat(t.colors.inputBorder),padding:"16px 0",...t.typography.LabelLarge,[t.mediaQuery.medium]:{display:"block",border:0,padding:"16px 24px 0",...t.typography.DisplayXSmall}}})),z=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"none",[t.mediaQuery.medium]:{display:"block",padding:"4px 24px 0",...t.typography.ParagraphMedium}}})),Q=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"none",[t.mediaQuery.medium]:{display:"block",padding:"8px 24px 24px",...t.typography.ParagraphSmall}}})),j=(0,n.zo)("div",(e=>{let{$paddingTop:t}=e;return{paddingTop:t?"".concat(t,"px"):"16px"}})),H=(0,n.w1)(C.Z,(e=>{let{$theme:t}=e;return{background:t.colors.backgroundSecondary}})),L=(0,n.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",boxSizing:"border-box",textAlign:"left"}),E=(0,n.zo)("div",{flex:"1",maxWidth:"calc(90%)"}),W=(0,n.zo)("p",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),X=(0,n.zo)("p",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),Y=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{color:t.colors.contentStateDisabled,display:"flex",justifyContent:"center"}})),V=(0,n.zo)("div",{padding:"0 24px"});function A(e){var t,r;let{store:n,$paddingTop:o}=e;const d=(0,a.T)(),{draftOrder:l,draftOrderUUID:s}=(0,D.Dz)(),{isBillSplitParticipant:u}=(0,_.Z)(),{updateDraftOrderV2:p}=(0,k.Z)(),[g,h]=(0,i.useState)(!1),[m,f]=(0,i.useState)(null==l?void 0:l.storeInstructions),C=(0,i.useRef)(null),x=void 0===(null===(t=n.data)||void 0===t?void 0:t.disableCheckoutInstruction)||Boolean(null===(r=n.data)||void 0===r?void 0:r.disableCheckoutInstruction),w=(0,I.T)();return x||u?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(j,{$paddingTop:o,children:(0,c.tZ)(H,{onClick:()=>{h(!0),C.current&&C.current.focus()},children:(0,c.tZ)(L,{children:null!=l&&l.storeInstructions?(0,c.BX)(c.HY,{children:[(0,c.tZ)(E,{children:(0,c.tZ)(W,{children:null==l?void 0:l.storeInstructions})}),(0,c.tZ)(Y,{children:(0,c.tZ)(Z.Z,{size:20})})]}):(0,c.BX)(c.HY,{children:[(0,c.BX)(E,{children:[(0,c.tZ)(W,{children:d("shared.add_an_order_note")}),(0,c.tZ)(X,{children:d("shared.special_instructions")})]}),(0,c.tZ)(Y,{children:(0,c.tZ)(v.Z,{size:20})})]})})})}),(0,c.tZ)(B,{onClick:e=>{e.target===e.currentTarget&&h(!1)},$isOpen:g,children:(0,c.BX)(S,{$isOpen:g,children:[(0,c.tZ)(P,{children:(0,c.tZ)(y.Z,{onClick:()=>h(!1)})}),(0,c.BX)(T,{children:[(0,c.tZ)($,{children:d("shared.add_an_order_note")}),(0,c.tZ)(z,{children:d("shared.optional")}),(0,c.tZ)(M,{children:(0,c.tZ)(b.Z,{value:m,onBlur:e=>p({draftOrderUUID:s,storeInstructions:e.target.value}),onChange:e=>f(e.target.value),placeholder:d(w?"shared.single_item_placeholder.non_eats":"shared.single_item_placeholder"),overrides:{Input:{style:{height:"120px"}}},inputRef:C})}),(0,c.tZ)(Q,{children:d("shared.you_may_be_charged_for_extras")}),(0,c.tZ)(V,{children:(0,c.tZ)(U.Z,{onClick:()=>h(!1),children:d("shared.save")})}),(0,c.tZ)(O.ZP,{$height:16})]})]})})]})}var F=r(42529),G=r(26701);const R=()=>{const e=(0,F.qp)({...G.J.utensils_checkbox_allowlist,defaultValue:""});return{showOldUtensilsFlow:t=>{if(!t)return!1;return e.split("//").includes(t)}}},q=e=>{var t;let{store:r,instructionsPadding:i,singleUseMargin:n,isRegularOrder:a=!1}=e;const{showOldUtensilsFlow:o}=R(),d=o(null===(t=r.data)||void 0===t?void 0:t.uuid);return(0,c.BX)("div",{children:[a&&!d?null:(0,c.tZ)(f,{store:r,margin:n,showUtensils:d}),(0,c.tZ)(A,{store:r,$paddingTop:i})]})}},80903:(e,t,r)=>{r.d(t,{Z:()=>B});var i=r(43193),n=r(7903),a=r(70300),o=r(97174),d=r(21954),l=r(31808),s=r(8237),u=r(52932),c=r(23773),p=r(2720),g=r(97802),h=r(89166),m=r(81584),f=r(17308),v=r(9739),Z=r(9266),O=r(80876),y=r(58700),b=r(19474),U=r(13597),C=r(33990);const _=(0,g.zo)("div",(e=>e.$isDraftOrderCreator?{}:{padding:"16px 0"})),I=(0,g.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center"}),x=e=>{var t,r,n;(0,u.Z)();const{serverCart:s}=(0,o.iQ)(),g=(null===(t=s.data)||void 0===t?void 0:t.groupedItems)||[],x=(0,h.Z)(),D=(0,c.T)(),{setIsManagingGroupOrder:k}=(0,y.Z)(),{storeUuid:w,updateItemQuantity:B,getItemClickUrl:S,gutterWidth:P}=e,T=(0,d.Z)(),{canEditGroupOrderCart:M}=(0,l.Z)(w),{cartsWithItems:$,cartsWithoutItems:z,currentUserCart:Q}=(0,v.Z)(),j=(0,b.ZP)(),H=(null===(r=s.data)||void 0===r?void 0:r.items)||[],L=(null===(n=s.data)||void 0===n?void 0:n.numMembers)||1,E=(0,m.dH)(H),W=T.isDraftOrderCreator,X=i.useCallback((e=>{j(e,{hhcoManageOrder:{itemQuantity:E,guestWithItemCount:$.length,guestWithoutItemCount:z.length,guestCount:L}})}),[j,L,E,$,z]);return(0,C.tZ)(C.HY,{children:x?(0,C.BX)(C.HY,{children:[(0,C.tZ)(O.jf,{groupingTitle:D(1===E?"go.num_cart_items_singular":"go.num_cart_items_plural",{numItems:E}),groupingDescription:1===$.length?D("go.num_people.singular",{numPeople:$.length}):D("go.num_people",{numPeople:$.length}),onClick:()=>X("eats:e4b_hhco_group_your_items_tap")}),(0,C.tZ)(U.a,{gutterWidth:P})]}):(0,C.BX)(_,{$isDraftOrderCreator:W,children:[W?(0,C.BX)(C.HY,{children:[(0,C.tZ)(f.ZP,{$height:16}),(0,C.BX)(I,{children:[(0,C.tZ)(p.D9,{children:(0,C.tZ)(a.v,{id:"go.people"})}),(0,C.tZ)(Z.Bi,{onClick:()=>{X("eats:e4b_hhco_manage_tap"),k(!0)},children:(0,C.tZ)(a.v,{id:"go.manage"})})]}),(0,C.tZ)(f.ZP,{$height:16}),(0,C.tZ)(U.a,{gutterWidth:P}),(0,C.tZ)(f.ZP,{$height:16})]}):null,Q?(0,C.BX)(C.HY,{children:[(0,C.tZ)(O.q4,{cartMemberIndex:g.length,cartByMember:Q,getItemClickUrl:S,updateItemQuantity:B,draftOrderMetadata:T,canEditGroupOrderCart:M,startExpanded:!0}),T.isDraftOrderCreator?(0,C.tZ)(f.ZP,{$height:16}):null]}):null,(0,C.tZ)(U.a,{gutterWidth:P}),T.isDraftOrderCreator?(0,C.BX)(C.HY,{children:[(0,C.tZ)(O.jf,{groupingTitle:D("go.manage.guests_with_items_cart_cta"),groupingDescription:1===$.length?D("go.num_people.singular",{numPeople:$.length}):D("go.num_people",{numPeople:$.length}),onClick:()=>X("eats:e4b_hhco_guest_with_items_tap")}),(0,C.tZ)(U.a,{gutterWidth:P}),(0,C.tZ)(O.jf,{groupingTitle:D("go.manage.guests_without_items_cart_cta"),groupingDescription:1===z.length?D("go.num_people.singular",{numPeople:z.length}):D("go.num_people",{numPeople:z.length}),onClick:()=>X("eats:e4b_hhco_guest_without_items_tap")})]}):(0,C.tZ)(O.jf,{groupingTitle:D("go.manage.other_guests_cta"),groupingDescription:D(1===L?"go.num_people.singular":"go.num_people",{numPeople:L}),onClick:()=>X("eats:e4b_hhco_other_guests_tap")}),(0,C.tZ)(U.a,{gutterWidth:P})]})})};var D=r(72611),k=r(503);function w(e){let{groupedItems:t,isBillSplitOrder:r,isCreator:i}=e;const[,n]=(0,g.hQ)();if(!i)return null;const o=t.length-1,d=t.reduce(((e,t)=>{var i;const n=Boolean(null==t?void 0:t.isCreator),a=r&&(null==t?void 0:t.confirmed),o=!r&&(null==t||null===(i=t.items)||void 0===i?void 0:i.length);return!n&&(a||o)?++e:e}),0);return(0,C.tZ)(p.aM,{color:n.colors.contentSecondary,marginBottom:n.sizing.scale600,children:r?(0,C.tZ)(a.v,{id:"go.creator.participant.completed.gobs.subtext",data:{totalCount:o,completedCount:d}}):(0,C.tZ)(a.v,{id:"go.creator.participant.completed.cpa.subtext",data:{totalCount:o,completedCount:d}})})}const B=e=>{var t;const r=(0,n.TH)(),{serverCart:c}=(0,o.iQ)(),g=(null===(t=c.data)||void 0===t?void 0:t.groupedItems)||[];(0,u.Z)();const h=(0,d.Z)(),{canEditGroupOrderCart:m}=(0,l.Z)(e.storeUuid),f=(0,D.Z)(),{isDraftOrderCreator:v}=h,Z=h.billSplitOption===s.x.SPLIT_BY_SUBTOTAL,y=(0,k.Z)();var b;if(h.isHandledHighCapacityOrder&&f)return(0,C.tZ)(x,{updateItemQuantity:e.updateItemQuantity,getItemClickUrl:e.getItemClickUrl,storeUuid:e.storeUuid,gutterWidth:null!==(b=e.gutterWidth)&&void 0!==b?b:void 0});const U=g.find((e=>e.isCurrentUser)),_=Boolean(null==U?void 0:U.isCreator);return(0,C.BX)(C.HY,{children:[(0,C.tZ)(p.fH,{marginTop:"scale800",marginBottom:"scale800",children:(0,C.tZ)(a.v,{id:"shared.yourItems"})}),U?(0,C.tZ)(O.pS,{cartByMember:U,showRemoveParticipantButton:!0,cartMemberIndex:0,startExpanded:!0,storeUuid:e.storeUuid,storeSlug:e.storeSlug,updateCartItemQuantity:y,location:r,isDraftOrderCreator:v,canEditGroupOrderCart:m,draftOrderMetadata:h}):null,g.length>1?(0,C.BX)(i.Fragment,{children:[(0,C.tZ)(p.fH,{marginTop:"scale600",marginBottom:_?"0":"scale600",children:(0,C.tZ)(a.v,{id:"go.other.group.memeber.section.heading"})}),(0,C.tZ)(w,{isBillSplitOrder:Z,groupedItems:g,isCreator:_}),g.map(((t,i)=>t.isCurrentUser?null:(0,C.tZ)(O.pS,{cartByMember:t,showRemoveParticipantButton:!0,cartMemberIndex:i,startExpanded:!1,storeUuid:e.storeUuid,storeSlug:e.storeSlug,updateCartItemQuantity:y,location:r,isDraftOrderCreator:v,canEditGroupOrderCart:m,draftOrderMetadata:h},i)))]}):null]})}},78519:(e,t,r)=>{r.d(t,{Z:()=>O});var i=r(70300),n=r(7903),a=r(58980),o=r(97802),d=r(4087),l=r(76653),s=r(90114),u=r(72403),c=r(97174),p=r(68527),g=r(21954),h=r(67395),m=r(92036),f=r(10419),v=r(33990);const Z=(0,o.w1)(d.Z,{marginTop:"12px"}),O=()=>{var e;const t=(0,n.k6)(),r=(0,a.TH)(),o=(0,s.Z)(),{isUnregisteredUser:d}=(0,m.Z)(),{leaveDraftOrder:O}=(0,l.Z)(),{member:y,removeMemberFromDraftOrder:b}=(0,f.Z)(),{draftOrderUuid:U,isRepeatGroupOrder:C}=(0,g.Z)(),{serverCart:_}=(0,c.iQ)(),I=null===(e=_.data)||void 0===e?void 0:e.cartUuid,{closeSidebarCart:x}=(0,p.Lb)(),D=(0,u.vN_)(r,"leaveGroupOrder"),{setActiveDraftOrder:k}=(0,h.Z)();return U&&I?(0,v.tZ)(Z,{disabled:O.isLoading||d&&y.isLoading,onClick:()=>{C?t.push(D):(d?b({draftOrderUuid:U,shouldClearCookies:!0}):O.mutate({draftOrderUUID:U}),k(),x(),t.push(o))},children:(0,v.tZ)(i.v,{id:"go.leave_group_order"})}):null}},9739:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(97174);function n(){var e;const{serverCart:t}=(0,i.iQ)(),r=(null===(e=t.data)||void 0===e?void 0:e.groupedItems)||[],n=[],a=[];let o;return r.forEach((e=>{e.isCurrentUser&&(o=e),e.items&&e.items.length>0?a.push(e):n.push(e)})),{cartsWithItems:a,cartsWithoutItems:n,currentUserCart:o}}},10419:(e,t,r)=>{r.d(t,{Z:()=>I});var i=r(43193),n=r(36151),a=r(7903),o=r(11183),d=r(49633),l=r(80148),s=r(57996),u=r(19474),c=r(15861),p=r(69655),g=r(23820),h=r(52269),m=r(78500),f=r(67395),v=r(19198),Z=r(72611),O=r(54068),y=r(8237),b=r(20623),U=r(87207),C=r(72403),_=r(58980);function I(){var e;const t=(0,u.ZP)(),r=(0,d.Z)("addMemberToDraftOrderV1"),I=(0,d.Z)("removeMemberFromDraftOrderV1",{continueOnUnmount:!0}),x=(0,O.Z)("getDraftOrderByUuidV2"),{discardDraftOrder:D}=(0,U.Z)(),k=(0,b.B)(),[w,B]=i.useState(l.E),{setActiveDraftOrder:S,refetchCartsView:P}=(0,f.Z)(),T=(0,Z.Z)(),M=(0,o.I0)(),$=(0,a.k6)(),z=(0,_.TH)(),Q=(0,h.Z)(),{storeUuid:j,groupOrder:H}=(0,v.Z)(""),L=null===(e=H.data)||void 0===e?void 0:e.addParticipantsIntended,{mpSource:E}=(0,C.RAN)(z,["mpSource"]),W=(0,n.useCallback)((async function(e){let{draftOrderUuid:i,redirectUrl:n,nickname:a,creatorEaterUuid:o,participantBusinessDetails:d,shouldRefetchCartsView:u=!0}=e;if(i){B({...l.E,isLoading:!0});try{const e=await r({draftOrderUuid:i,nickname:a,creatorEaterUUID:o,participantBusinessDetails:d});if(j&&L&&M((0,g.A0)(j,{isGroupOrderParticipant:!0,storeDiningMode:e.diningMode,storeDeliveryLocation:e.deliveryAddress})),M((0,c.hW)()),M((0,m.op)(e)),T&&u&&P(),t("eats:group_order_participant_join",{draftOrderUuid:i,isBillSplitOrder:e.billSplitOption===y.x.SPLIT_BY_SUBTOTAL,source:E}),n)return $.push(n);B({isLoading:!1,hasLoaded:!0,error:null,data:e})}catch(e){if(e instanceof s.F)return;return B({isLoading:!1,hasLoaded:!0,error:e,data:null}),Promise.reject(e)}}}),[r,j,L,M,T,t,E,P,$]),X=(0,n.useCallback)((async function(e){let{draftOrderUuid:r,shouldClearCookies:i,redirectUrl:n}=e;r&&(B({...l.E,isLoading:!0}),await I({draftOrderUuid:r,shouldClearCookies:i}),t("eats:group_order_participant_leave",{draftOrderUuid:r}),B({...l.E,hasLoaded:!0}),T&&(S(),P()),n&&$.push(n))}),[I,t,$,T,S,P]),Y=(0,n.useCallback)((async e=>{let{draftOrderUuid:r,oldDraftOrderUUID:i,isDraftOrderOwner:n,deliveryAddress:a,redirectUrl:o,nickname:d}=e;await W({draftOrderUuid:r,nickname:d,shouldRefetchCartsView:!1}),i&&(B({...l.E,isLoading:!0}),n?await D({draftOrderUUIDs:[i]}):(await I({draftOrderUuid:i,shouldClearCookies:!1}),t("eats:group_order_participant_leave",{draftOrderUuid:r})),M((0,p.yR)(i)),a&&Q(a),B({...l.E,isLoading:!1}),o&&$.replace(o)),T&&P()}),[W,T,M,D,I,t,Q,$,P]),V=(0,n.useCallback)((async function(e){let{draftOrderUuid:t,eaterUuid:r,redirectUrl:i}=e;t&&r&&(await I({draftOrderUuid:t,eaterUuid:r,shouldClearCookies:!1}),k({checkoutPresentation:!0}),await x({draftOrderUUID:t}),i&&$.push(i))}),[I,x,t,$]);return{addMemberToDraftOrder:W,removeAndAddToDraftOrder:Y,removeMemberFromDraftOrder:X,removeParticipantFromGroupOrder:V,member:w}}},76653:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(17211),n=r(54068),a=r(83324),o=r(8444),d=r(19079),l=r(75433),s=r(135),u=r(93026);const c=()=>{const e=(0,u.Z)("removeMemberFromDraftOrderV2"),t=(0,u.Z)("addMemberToDraftOrderV2"),r=(0,n.Z)("getDraftOrderByUuidV2"),c=(0,i.useQueryClient)(),{clearRepeatOrder:p}=(0,o.Z)(),g=(0,s.f)();return{removeMemberFromDraftOrder:(0,i.useMutation)((t=>e.request("removeMemberFromDraftOrderV2",t)),{onSuccess:(e,t)=>{"repeatOrderTemplateUUID"in t&&c.invalidateQueries([...d.H,t.repeatOrderTemplateUUID]),t.draftOrderUUID&&r({draftOrderUUID:t.draftOrderUUID})}}),leaveDraftOrder:(0,i.useMutation)((t=>e.request("removeMemberFromDraftOrderV2",t)),{onSuccess:(e,t)=>{c.invalidateQueries(a.x),"repeatOrderTemplateUUID"in t&&p(t.repeatOrderTemplateUUID),c.invalidateQueries(l.IG)}}),addMemberToDraftOrder:(0,i.useMutation)((e=>t.request("addMemberToDraftOrderV2",e)),{onSuccess:(e,t)=>{"repeatOrderTemplateUUID"in t?(c.invalidateQueries([...d.H,t.repeatOrderTemplateUUID]),g()):c.invalidateQueries(a.x),"draftOrderUUID"in t&&r({draftOrderUUID:t.draftOrderUUID})}})}}},135:(e,t,r)=>{r.d(t,{f:()=>o});var i=r(17211),n=r(83324),a=r(49321);const o=()=>{const e=(0,i.useQueryClient)();return()=>{setTimeout((()=>{e.invalidateQueries(n.x)}),a.Ts)}}}}]);