"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[91250],{67999:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(36151),o=i(11183),r=i(28398),a=i(45037);const l=()=>{const t=(0,o.I0)();return{addToCartDraftArgs:(0,r.v)((t=>t.addToCart.addToCartDraftArgs)),setDraftAddToCart:(0,n.useCallback)((e=>t((0,a.mm)(e))),[t]),cleanDraftAddToCart:(0,n.useCallback)((()=>t((0,a.Ir)())),[t])}}},91250:(t,e,i)=>{i.d(e,{Z:()=>et});var n=i(36151),o=i(11183),r=i(7903),a=i(58980),l=i(5915),d=i(26908),u=i(8070),s=i(47265),c=i(72403),v=i(19474),m=i(97174),U=i(20623),p=i(89834),y=i(78272),f=i(56312),I=i(97886),D=i(78637),g=i(20567),h=i(56702),S=i(3770),b=i(67395),C=i(21954),O=i(91377),T=i(42529),P=i(26701),A=i(10086),_=i(68387),k=i(7630),Z=i(82691),B=i(18459),E=i(4361),R=i(88836);var L=i(31850),q=i(40367);const M="uev2.go.cpa.participant.notification",w=()=>[(0,n.useCallback)((t=>{var e,i;return null!==(e=null===(i=(0,q.Z7)(M))||void 0===i?void 0:i[t])&&void 0!==e&&e}),[]),(0,n.useCallback)((t=>{(0,q.pc)(M,{[t]:!0},14400)}),[])];var z=i(74482),Q=i(80484);const V={quickAdd:"quick_add",productDetails:"product_details",menuItem:"menu_item",canonicalItem:"canonical_item",quickView:"quick_view"};var x=i(12305),W=i(23773),G=i("__fusion__452"),N=i(61136),H=i(56971),F=i(33990);const J=()=>{const t=(0,W.T)(),{enqueue:e}=(0,N.Ds)();return(0,n.useCallback)((()=>{e({message:t("store.bundle_store.bundle_order_created"),startEnhancer:t=>{let{size:e}=t;return(0,F.tZ)(G.default,{size:e})}},H.t.long)}),[e,t])};var Y=i(25832),X=i(74113),j=i(66970),K=i(94320),$=i(67999),tt=i(40921);const et=t=>{var e,i,q,M;const{store:W,menuItem:G,selectedCustomizations:N,quantity:H,specialInstructions:F,outOfItemAction:et,onAddedToCart:it,decimalQuantity:nt,backupProduct:ot,itemAd:rt,productUuid:at,analytics:lt}=t,dt=(0,v.ZP)(),ut=(0,a.TH)(),st=(0,r.k6)(),{setActiveDraftOrder:ct,cartViews:vt,isInMulticart:mt,refetchCartsView:Ut}=(0,b.Z)(),pt=vt.length,[yt,ft]=(0,n.useState)(!1),[It,Dt]=(0,n.useState)(!1),[gt,ht]=(0,n.useState)(!1),St=(0,o.I0)(),{isStorePrecheckoutBundlingEnabled:bt}=(0,x.Z)(),{shouldShowBundleLimitReachedDialog:Ct,openBundleLimitReachedDialog:Ot}=(0,Y.Z)({storeUuid:null===(e=W.data)||void 0===e?void 0:e.uuid}),{shouldShowBundleItemsWithStoreDialog:Tt,openBundleItemsWithStoreDialog:Pt}=(0,X.Z)({storeUuid:null===(i=W.data)||void 0===i?void 0:i.uuid}),At=(0,c.RAN)(ut,["storeCatalogSections","primaryDraftOrderUUID","modalContext"]),_t=At.storeCatalogSections?"l2":"l1",kt=(0,c.kPj)(At.modalContext||""),Zt=bt?t.primaryDraftOrderUUID||At.primaryDraftOrderUUID||(null==kt?void 0:kt.primaryDraftOrderUUID):null,[Bt,Et]=w();let{serverCart:Rt}=(0,m.iQ)();const{draftOrderUuid:Lt}=(0,y.Z)(),qt=null===(q=W.data)||void 0===q?void 0:q.uuid,Mt=(0,f.Z)(qt),wt=Mt?Mt.storeUUID:null===(M=Rt.data)||void 0===M?void 0:M.storeUuid,zt=Mt?Mt.draftOrderUUID:Lt,Qt=(0,O.fy)(G,H),{isDelegatedBooking:Vt,firePostMessage:xt}=(0,j.W)(),{setDraftAddToCart:Wt}=(0,$.Z)(),Gt=(0,D.Z)({});mt&&Boolean(Mt)&&(Rt=Mt.cart);const Nt=(0,n.useCallback)((()=>{Dt(!0)}),[Dt]),Ht=(0,n.useCallback)((t=>{t!==Lt&&(Lt?dt("eats:multicart_add_to_cart_draft_order_discrepancy",{storeUuid:qt}):ct(t))}),[dt,qt,Lt,ct]),Ft=(0,g.Z)({storeUuid:qt}),{createDraftOrder:Jt}=(0,I.Z)("add-to-cart",Nt),{mutate:Yt,inCheckoutPresentationQueryXP:Xt}=(0,U.A)("addItemsToDraftOrderV2",zt||""),{mutate:jt}=(0,U.A)("addItemsToGroupDraftOrderV2",zt||""),Kt=(0,p.Z)("change_store"),{isEditOrder:$t,isDraftOrderParticipant:te,isBillSplitOrder:ee}=(0,C.Z)(),{hasActiveDraftOrderMetadata:ie,activePreferenceType:ne,deliveryTime:oe}=(0,h.Z)(qt),{handledHighCapacityOrderIntent:re}=(0,B.Z)(),ae=(0,T.ip)({...P.J.store_add_to_cart_button_revamp,defaultValue:!1}),{isMobile:le}=(0,z.hU)(),de=function(t){var e;const i=(0,a.TH)(),n=(0,r.UO)(),o=(0,R.Z)();return(0,c.I6I)(i,{...(0,c.x9r)(n),...o?{itemUuid:o.itemUuid,sectionUuid:o.sectionUuid,subsectionUuid:o.subsectionUuid,storeUuid:o.storeUuid,storeSlug:null===(e=t.data)||void 0===e?void 0:e.slug}:null})}(W),ue=J(),se=!(!mt||!Mt)&&Mt.draftOrderUUID!==Lt,ce=(0,n.useCallback)((e=>{var i,n,o;let{isStartingNewOrder:r,eventSource:a,actionMeta:v,disableBundling:m,replaceAllItems:U}=e;const p=W.data,y=G.data;if(!p||!y)return;const f={addToCartData:t,isStartingNewOrder:r,eventSource:a,actionMeta:v,disableBundling:m};if(Tt&&"pcb_bundle_items_with_store"!==a)return Wt(f),Pt();if(Ct&&"pcb_bundle_limit_reached"!==a)return Wt(f),Ot();if(!mt&&!r&&wt&&wt!==(null==p?void 0:p.uuid))return st.replace(de);r&&(ft(!0),Kt());const{isPricedByWeight:I,isSoldByWeight:D,soldByUnit:g,pricedByUnit:h}=(0,k.ap)(y),b=[{sectionUUID:null==ot?void 0:ot.sectionUUID,subsectionUUID:null==ot?void 0:ot.subsectionUUID,title:null==ot?void 0:ot.title,quantity:H,storeUUID:p.uuid,skuUUID:null==ot?void 0:ot.itemUUID}],C=(0,d.qH)(N,y.customizationsList)||{},O=()=>{if(p.fulfillmentIssueOptions&&et)return{type:et,itemSubstitutes:"SUBSTITUTE_ITEM"===et?b:[]};if(null!=y&&y.fulfillmentIssueAction)return y.fulfillmentIssueAction;if(p.fulfillmentIssueOptions){var t;const e=null==p||null===(t=p.fulfillmentIssueOptions)||void 0===t?void 0:t.resolutionActions,i=null==e?void 0:e.find((t=>t.isDefault));if(i&&null!==i.action)return null==i?void 0:i.action}},T={uuid:y.uuid,shoppingCartItemUuid:(0,s.Z)(),storeUuid:p.uuid,sectionUuid:y.sectionUuid,subsectionUuid:y.subsectionUuid,price:y.price,title:y.title,quantity:H,customizations:C,imageURL:y.imageUrl,specialInstructions:F,...O()?{fulfillmentIssueAction:O()}:{},itemId:(null==y?void 0:y.itemId)||null};var P,B,R,q;I&&nt&&(T.itemQuantity={inSellableUnit:{value:A.Tf.from(nt).toE5().toCoefficientDecimal(),measurementUnit:g}},T.pricedByUnit=null==y||null===(P=y.purchaseInfo)||void 0===P||null===(B=P.pricingInfo)||void 0===B?void 0:B.pricedByUnit,T.quantity=D?1:T.quantity,null!=T&&null!==(R=T.fulfillmentIssueAction)&&void 0!==R&&null!==(q=R.itemSubstitutes)&&void 0!==q&&q[0]&&(T.fulfillmentIssueAction.itemSubstitutes[0].itemQuantity=T.itemQuantity,T.fulfillmentIssueAction.itemSubstitutes[0].quantity=T.quantity));const M=(p.promoTrackings||[]).find((t=>t.shouldAutoApply)),w=(null===(i=p.promotion)||void 0===i?void 0:i.promotionUuid)||(null==M?void 0:M.promotionUuid);w&&St((0,u.Zt)(w));const z=null===(n=p.storeInfoMetadata)||void 0===n||null===(o=n.storeAvailablityStatus)||void 0===o?void 0:o.state,x=(0,E.vu)(null==y?void 0:y.productDetailsItems),J=(null==x?void 0:x.storesWithProduct)||[],Y=J.find((t=>{let{storeUuid:e}=t;return e==T.storeUuid}));dt("eats:add_to_cart",{cartItem:T,store:(0,l.TG)(p),isGroupOrderParticipant:te,isEditScheduledOrder:$t,addToCartEvent:Qt,...(null==g?void 0:g.measurementType)&&{soldByUnit:null==g?void 0:g.measurementType},...(null==h?void 0:h.measurementType)&&{soldByUnit:null==h?void 0:h.measurementType},..._t&&{storeCatalog:{catalogItemLevel:_t}},...a&&{eventSource:a},...zt&&{draftOrderUuid:zt},...ne&&{activePreferenceType:ne},...z&&{storeAvailabilityState:z},...(null==v?void 0:v.isQuickAdd)&&(null==v?void 0:v.quickAddSource)&&{quickAddSource:v.quickAddSource},productDetails:{canonicalPDP:{availableMerchants:J,selectedMerchant:Y,canonicalProductUuid:String(at||"")}},vertical:(0,L.E)(p),...(null==lt?void 0:lt.catalogSection)&&{storeCatalogSectionAnalytics:lt.catalogSection}}),rt&&a===V.quickAdd&&dt("ads:storefront_store_click",{adsAnalyticsEvent:{adEventType:Q.J.CLICK,adImpressionUUID:rt.impressionId||"",adData:rt.adData||"",bidderUUID:qt}});const X=()=>{Dt(!0),St((0,Z.im)());const t=()=>{mt&&!$t&&(Ht(Mt.draftOrderUUID),Xt||Ut())};ae&&le?setTimeout(t,500):t()},j=mt&&wt!==(null==p?void 0:p.uuid)&&pt>=1;if(!j&&!r&&zt&&Mt&&Mt.cartUUID){var K,$;if(U)Gt.mutateAsync({draftOrderUUID:Mt.draftOrderUUID,replaceItemsInCartRequest:{cartUUID:Mt.cartUUID,itemsToBeAdded:[(0,tt.vz)(T)],shoppingCartItemUuidsToBeRemoved:(null===(K=Mt.cart.data)||void 0===K||null===($=K.items)||void 0===$?void 0:$.map((t=>t.shoppingCartItemUuid)))||[]}}).then(X);else if(Mt.isGroupOrder)!te||ee||Bt(Mt.cartUUID)||(Et(Mt.cartUUID),st.push((0,c.vN_)(ut,"goCpaParticipantAddSuccess"))),jt({draftOrderUUID:Mt.draftOrderUUID,cartUUID:Mt.cartUUID,items:[T]}).then(X);else{const t=mt&&!ie;Yt({draftOrderUUID:Mt.draftOrderUUID,cartUUID:Mt.cartUUID,items:[T],shouldUpdateDraftOrderMetadata:t,storeUUID:p.uuid,actionMeta:v}).then(X)}}else{var it,ct;const t=(null==re?void 0:re.hhcOrderSize)||(null===(it=(0,_.vD)(null===(ct=W.data)||void 0===ct?void 0:ct.groupOrderSizes))||void 0===it?void 0:it.hhcOrderSize);Jt({shoppingCartItems:[T],isBandwagon:Ft,isMulticart:Boolean(mt&&j),deliveryTime:oe,actionMeta:v,currencyCode:p.currencyCode,...t&&{handledHighCapacityOrderMetadata:(0,_.Qe)(t)},...Zt&&!m?{primaryDraftOrderUUID:Zt}:null}),St((0,Z.im)()),j&&(St((0,S.c)()),ht(!0))}}),[W.data,G.data,mt,wt,null==ot?void 0:ot.sectionUUID,null==ot?void 0:ot.subsectionUUID,null==ot?void 0:ot.title,null==ot?void 0:ot.itemUUID,H,N,F,nt,dt,te,$t,Qt,_t,zt,ne,at,null==lt?void 0:lt.catalogSection,rt,pt,Mt,st,de,Kt,et,St,qt,ae,le,Ht,Xt,Ut,ee,Bt,jt,Et,ut,ie,Yt,null==re?void 0:re.hhcOrderSize,Jt,Gt,Ft,oe,Zt,Ot,Pt,Ct,Tt,Wt,t]);return(0,n.useEffect)((()=>{var t,e,i,n,o,r,a;!Rt.isLoading&&Rt.hasLoaded&&(It&&(null==it||it(yt,null===(t=Rt)||void 0===t?void 0:t.error,gt),!se||!zt||null!==(e=Rt)&&void 0!==e&&e.error||ct(zt),Vt&&xt({type:K.Mp.ORDER_CREATED,payload:{draftOrderUuid:zt}}),bt&&"SECONDARY"===(null==Mt||null===(i=Mt.draftOrder)||void 0===i||null===(n=i.bundleGroupInfo)||void 0===n?void 0:n.bundleGroupRole)&&1===(null==Mt||null===(o=Mt.cart)||void 0===o||null===(r=o.data)||void 0===r||null===(a=r.items)||void 0===a?void 0:a.length)&&ue(),Dt(!1)))}),[It,it,yt,Rt,gt,zt,Mt,Vt,ct,xt,se,bt,ue]),{addToCart:ce,didAddItem:It}}},91377:(t,e,i)=>{i.d(e,{ck:()=>d,fy:()=>s,xZ:()=>u});var n=i(97174),o=i(29673),r=i(21954),a=i(47256),l=i(81584);function d(t){var e;return t&&(null==t||null===(e=t.customizationsList)||void 0===e?void 0:e.filter((t=>t.minPermitted>0||t.minPermittedUnique>0)).length)||0}function u(){var t,e,i;const{serverCart:a}=(0,n.iQ)(),{validationErrorTypes:d}=(0,n.Dz)(),u=null===(t=a.data)||void 0===t?void 0:t.storeUuid,s=(null===(e=a.data)||void 0===e?void 0:e.items)||[],c=(0,r.Z)(),v=(0,o.kF)(c),m=(0,l.dH)(s),U=(0,l.cJ)(s),p=(0,o.eX)(u||""),y=(0,l.DR)(null===(i=a.data)||void 0===i?void 0:i.items);return{quantity:m,numDistinctItem:U,deliveryTime:p,modality:(null==c?void 0:c.diningMode)||"",orderRole:v||"",subTotal:y,validationErrors:d}}function s(t,e){var i,l,u,s,c,v,m,U,p,y,f,I;const{serverCart:D}=(0,n.iQ)(),g=(0,a.d)(),h=null!==(i=null===(l=D.data)||void 0===l?void 0:l.storeUuid)&&void 0!==i?i:"",S=(0,r.Z)(),b=null!==(u=(0,o.kF)(S))&&void 0!==u?u:"",C=(0,o.eX)(h),O=null==t?void 0:t.data,T=null!==(s=(null!==(c=null==O?void 0:O.images)&&void 0!==c?c:[]).length)&&void 0!==s?s:0,P=d(O),A=null!==(v=null==O?void 0:O.price)&&void 0!==v?v:0;return{quantity:null!=e?e:0,numImages:T,deliveryTime:C,orderRole:b,numRequiredCustomizations:P,diningMode:g,hasCaloricInfo:Boolean(null==O?void 0:O.nutritionalInfo),hasDescription:Boolean(null==O?void 0:O.itemDescription),localPrice:A,hasRating:"confidence_builders_eater_endorsed"===(null==O?void 0:O.endorsementAnalyticsTag),ratings:String((null==O||null===(m=O.endorsement)||void 0===m||null===(U=m.text)||void 0===U||null===(p=U.split(","))||void 0===p?void 0:p[1])||""),pctLiked:String((null==O||null===(y=O.endorsement)||void 0===y||null===(f=y.text)||void 0===f||null===(I=f.split(","))||void 0===I?void 0:I[0])||"")}}},78637:(t,e,i)=>{i.d(e,{Z:()=>u});var n=i(17211),o=i(93026),r=i(67395),a=i(20623),l=i(54068);const d="replaceItemsInDraftOrderV1";function u(){let{onSuccess:t,onError:e,onSettled:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=(0,a.B)(),s=(0,l.Z)("getDraftOrderByUuidV2"),{isInMulticart:c,refetchCartsView:v}=(0,r.Z)(),m=(0,o.Z)(d),U=(0,n.useMutation)((t=>m.request(d,t)),{onSuccess:(e,i,n)=>{const o=i.draftOrderUUID||"";o&&(u({checkoutPresentation:!0,cartViews:!0}),s({draftOrderUUID:o}),c&&v(),"function"==typeof t&&t(e,i,n))},onError:e,onSettled:i});return U}},40921:(t,e,i)=>{i.d(e,{rk:()=>f,vz:()=>y});var n=i(33679),o=i.n(n),r=i(26908);const a=t=>{if(t&&t.options)return{options:t.options.map((t=>({uuid:t.uuid,title:t.title,quantity:t.quantity,defaultQuantity:t.defaultQuantity,customizationV2List:u(t.customizationV2List)})))}},l=t=>({options:t.options.map((t=>({uuid:t.uuid,title:t.title,quantity:t.quantity,defaultQuantity:t.defaultQuantity,customizationV2List:d(t.customizationV2List)})))}),d=t=>{if(t)return t.map((t=>({uuid:t.uuid,title:t.title,childOptions:l(t.childOptions),minPermitted:t.minPermitted,maxPermitted:t.maxPermitted})))},u=t=>{if(t)return t.map((t=>({uuid:t.uuid,title:t.title,vendorInfo:t.vendorInfo,customizationInstanceUUID:t.customizationInstanceUUID,childOptions:a(t.childOptions)})))},s=t=>{if(t)return t.map((t=>({shoppingCartItemUUID:t.shoppingCartItemUUID,skuUUID:t.skuUUID,storeUUID:t.storeUUID,sectionUUID:t.sectionUUID,subsectionUUID:t.subsectionUUID,quantity:t.quantity,specialInstructions:t.specialInstructions,createdTimestamp:t.createdTimestamp,title:t.title,vendorInfo:t.vendorInfo,customizationV2s:u(t.customizationV2s),isEntree:t.isEntree,numAlcoholicItems:t.numAlcoholicItems,dietaryInfo:t.dietaryInfo,consumerUUID:t.consumerUUID,allergyUserInput:t.allergyUserInput,fulfillmentIssueAction:c(t.fulfillmentIssueAction),itemQuantity:p(t.itemQuantity),imageURL:(null==t?void 0:t.imageURL)||""})))},c=t=>{if(t)return{type:t.type,itemSubstitutes:s(t.itemSubstitutes)}},v=t=>{if(t)return{measurementType:t.measurementType,length:t.length,weight:t.weight,volume:t.volume}},m=t=>{if(t)return{value:t.value,measurementUnit:v(t.measurementUnit),measurementUnitAbbreviationText:t.measurementUnitAbbreviationText}},U=t=>{var e,i;if(t)return t.value&&"number"==typeof(null===(e=t.value)||void 0===e?void 0:e.coefficient)&&"number"==typeof(null===(i=t.value)||void 0===i?void 0:i.exponent)?m({value:{exponent:t.value.exponent,coefficient:{...o().fromNumber(t.value.coefficient)}},measurementUnit:t.measurementUnit,measurementUnitAbbreviationText:t.measurementUnitAbbreviationText}):m(t)},p=t=>{if(t)return{inSellableUnit:U(t.inSellableUnit),inPriceableUnit:m(t.inPriceableUnit)}},y=t=>{var e,i,n;return{shoppingCartItemUUID:t.shoppingCartItemUuid,skuUUID:t.uuid,storeUUID:t.storeUuid,sectionUUID:t.sectionUuid,subsectionUUID:t.subsectionUuid,quantity:"MEASUREMENT_TYPE_WEIGHT"===(null===(e=t.itemQuantity)||void 0===e||null===(i=e.inSellableUnit)||void 0===i||null===(n=i.measurementUnit)||void 0===n?void 0:n.measurementType)?1:t.quantity,specialInstructions:t.specialInstructions,fulfillmentIssueAction:c(t.fulfillmentIssueAction),title:t.title,customizationV2s:d((0,r.cD)(t.customizations)),itemQuantity:p(t.itemQuantity),imageURL:(null==t?void 0:t.imageURL)||"",itemID:(null==t?void 0:t.itemId)||null}};function f(t,e){var i,n,o,r,a;return{shoppingCartItemUUID:null,skuUUID:null!==(i=t.itemUUID)&&void 0!==i?i:null,sectionUUID:null!==(n=t.sectionUUID)&&void 0!==n?n:null,subsectionUUID:null!==(o=t.subsectionUUID)&&void 0!==o?o:null,storeUUID:null!==(r=null==e?void 0:e.storeUuid)&&void 0!==r?r:null,title:null!==(a=t.title)&&void 0!==a?a:null,quantity:1}}},88836:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(43193),o=i(58980),r=i(72403),a=i(64614);function l(t){const e=(0,o.TH)(),{modalName:i}=(0,r.RAN)(e,["modalName"]),{itemUuid:l="",sectionUuid:d,subsectionUuid:u,storeUuid:s,customizationRefUuids:c=[],showSeeDetailsCTA:v=!0,primaryBundledStoreUuid:m}=(0,r.vRw)(),{cartItem:U}=(0,a.Z)(l);return n.useMemo((()=>t&&U?{itemUuid:U.uuid,sectionUuid:U.sectionUuid,subsectionUuid:U.subsectionUuid,storeUuid:U.storeUuid,customizationRefUuids:c,showSeeDetailsCTA:!0}:"quickView"===i&&l&&d&&u&&s?{itemUuid:l,sectionUuid:d,subsectionUuid:u,storeUuid:s,customizationRefUuids:c,showSeeDetailsCTA:v,primaryBundledStoreUuid:m}:null),[t,U,i,l,d,u,s,c,v,m])}},74113:(t,e,i)=>{i.d(e,{Z:()=>v});var n=i(36151),o=i(7903),r=i(44815),a=i(58980),l=i(56312),d=i(83832),u=i(12305),s=i(17457),c=i(97174);const v=t=>{var e,i;let{storeUuid:v}=t;const m=(0,o.k6)(),U=(0,a.TH)(),{primaryDraftOrderUUID:p,primaryBundledStoreUuid:y}=(0,d.Z)(),{cart:f}=(0,l.Z)(v),{isStorePrecheckoutBundlingEnabled:I}=(0,u.Z)(),{isBundledOrder:D,bundledOrders:g}=(0,c.Dz)(p),h=null==g?void 0:g[0],S=(null===(e=f.data)||void 0===e||null===(i=e.items)||void 0===i?void 0:i.length)||0,b=(0,n.useCallback)((t=>{const e=r.parse(U.search||"");"bundleItemsWithStore"===(null==e?void 0:e.pmod)||m.push((0,s.b0)(U,v||"",null==t?void 0:t.source))}),[m,U,v]);return!I||!v||!p||0===S||D&&h&&h.storeUuid===v||y===v?{shouldShowBundleItemsWithStoreDialog:!1,openBundleItemsWithStoreDialog:b}:{shouldShowBundleItemsWithStoreDialog:!0,openBundleItemsWithStoreDialog:b}}},25832:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(36151),o=i(7903),r=i(44815),a=i(58980),l=i(97174),d=i(83832),u=i(12305),s=i(17457);const c=t=>{let{storeUuid:e}=t;const i=(0,o.k6)(),c=(0,a.TH)(),{isStorePrecheckoutBundlingEnabled:v}=(0,u.Z)(),{primaryDraftOrderUUID:m}=(0,d.Z)(),{draftOrder:U,bundledOrders:p}=(0,l.Dz)(m),y=(0,n.useCallback)((t=>{const n=r.parse(c.search||""),o="pcbLimitReached"===(null==n?void 0:n.pmod);if(!e||o)return;const a=(0,s.lS)(c,e);t?i.replace(a):i.push(a)}),[i,c,e]);if(!(v&&e&&m&&U&&p&&0!==p.length))return{shouldShowBundleLimitReachedDialog:!1,openBundleLimitReachedDialog:y};const f=p[0];return(null==f?void 0:f.storeUuid)!==e?{shouldShowBundleLimitReachedDialog:!0,openBundleLimitReachedDialog:y}:{shouldShowBundleLimitReachedDialog:!1,openBundleLimitReachedDialog:y}}},29673:(t,e,i)=>{i.d(e,{kF:()=>U,uD:()=>f,IJ:()=>y,eX:()=>p});var n=i(17528),o=i(21954);let r=function(t){return t.groupOrderCreator="group_order_creator",t.groupOrderParticipant="group_order_participant",t.singleOrder="single_order",t}({}),a=function(t){return t.asap="asap",t.scheduled="scheduled",t}({});var l=i(47256),d=i(19474),u=i(56702),s=i(36151),c=i(5915),v=i(69237),m=i(31850);function U(t){return t.isDraftOrderCreator?r.groupOrderCreator:t.isDraftOrderParticipant?r.groupOrderParticipant:r.singleOrder}function p(t){const e=(0,u.Z)(t);return"object"==typeof e.deliveryTime&&"scheduled"in e.deliveryTime?a.scheduled:a.asap}function y(t){var e,i,r;let{store:a,isLegacyStorePayload:y,activeSectionUuid:f}=t;const I=(0,n.Tz)(),D=U((0,o.Z)()),g=(0,l.d)(),h=p(a.uuid),S=(0,d.ZP)(),b=function(t){var e;return"USE_SECTION_AS_CATEGORY"===t.menuDisplayType?1:(null===(e=t.sections)||void 0===e?void 0:e.length)||0}(a),C=a.timing,O=(null===(e=a.parentChain)||void 0===e?void 0:e.uuid)||"",T=a.citySlug||"",{title:P,uuid:A,currencyCode:_,status:k}=(0,c.TG)(a),Z=null===(i=a.storeInfoMetadata)||void 0===i||null===(r=i.storeAvailablityStatus)||void 0===r?void 0:r.state,{activePreferenceType:B}=(0,u.Z)(a.uuid),E="USE_SECTION_AS_CATEGORY"===a.menuDisplayType?"grocery":"restaurant",R=((t,e)=>{var i;if(!e)return"Single Level List";const n=(0,m.A)(t)?"Multi Level":"Single Level",o=(null===(i=t.catalogSectionsMap)||void 0===i?void 0:i[e])||[],r=o.some((t=>{const e=(0,v.FA)(t);return((null==e?void 0:e.catalogItems)||[]).some((t=>"LIST"===t.displayType))})),a=o.some((t=>{const e=(0,v.FA)(t);return((null==e?void 0:e.catalogItems)||[]).some((t=>"GRID"===t.displayType))})),l=r&&a?"Mixed":r?"List":"Grid";return"".concat(n," ").concat(l)})(a,f);(0,s.useEffect)((()=>{C&&S("eats:store",{store:{title:P,uuid:A,currencyCode:_,status:k},isLegacyStorePayload:y,storeAvailabilityState:Z,activePreferenceType:B,vertical:E,slug:T,storeMainView:{previousPath:I,diningMode:g,numMenus:b,chainUUID:O,orderRole:D,deliveryTime:h,storeLayout:R,loadTime:C}})}),[S,P,A,_,Z,k,y,B,T,I,g,b,E,O,D,h,R,C])}function f(){const t=(0,d.ZP)(),e=(0,o.Z)();return function(i,n){t("eats:store_menu_switcher_select",{storeMenuSwitcher:{storeUUID:i,isMenuOpen:n,orderRole:U(e)}})}}},31850:(t,e,i)=>{i.d(e,{A:()=>n,E:()=>o});const n=t=>"USE_SECTION_AS_CATEGORY"===t.menuDisplayType,o=t=>n(t)?"grocery":"restaurant"},4361:(t,e,i)=>{i.d(e,{GS:()=>U,I9:()=>c,J8:()=>r,Ju:()=>l,c6:()=>u,fZ:()=>s,g_:()=>v,lo:()=>m,pB:()=>a,vu:()=>d,y6:()=>o});var n=i(69237);const o=t=>!(!t||!t.length)&&t.some((t=>{var e;return"disclaimerPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)})),r=t=>{var e;const i=(t||[]).find((t=>{var e;return"pricingPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)}));let n;return"pricingPayload"===(null==i||null===(e=i.payload)||void 0===e?void 0:e.type)&&(n=i.payload.pricingPayload),n},a=t=>{var e,i,n;return"standardMetadataPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)&&"description_metadata"===(null===(i=t.payload)||void 0===i||null===(n=i.standardMetadataPayload.metadata)||void 0===n?void 0:n.type)},l=t=>{var e,i;const n=(t||[]).find((t=>{var e;return"variantOptionsPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)}));return"variantOptionsPayload"===(null==n||null===(e=n.payload)||void 0===e?void 0:e.type)?null===(i=n.payload)||void 0===i?void 0:i.variantOptionsPayload:null},d=t=>{var e;const i=(t||[]).find((t=>{var e;return"storesWithProductPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)}));if("storesWithProductPayload"===(null==i||null===(e=i.payload)||void 0===e?void 0:e.type))return i.payload.storesWithProductPayload},u=t=>{const e=(t||[]).find((t=>{const e=t.payload;return"productCatalogSectionPayload"===(null==e?void 0:e.type)})),i=null==e?void 0:e.payload;if(!i)return null;switch(i.type){case"productCatalogSectionPayload":return i.productCatalogSectionPayload;default:return null}},s=t=>{var e,i;const n=(t||[]).find((t=>{var e;return"miniStoreCardPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)}));return"miniStoreCardPayload"===(null==n||null===(e=n.payload)||void 0===e?void 0:e.type)?null===(i=n.payload)||void 0===i?void 0:i.miniStoreCardPayload:null},c=t=>(t.productDetailsItems||[]).reduce(((t,e)=>{var i;if("productCatalogSectionPayload"!==(null===(i=e.payload)||void 0===i?void 0:i.type))return t;const o=e.payload.productCatalogSectionPayload.catalogSection;if(null==o||!o.payload)return t;const r=(0,n.FA)(o);return t+((null==r?void 0:r.catalogItems)||[]).length}),0),v=t=>Object.values(t).flat().reduce(((t,e)=>t||e.price>0&&e.quantity>0),!1),m=t=>{var e,i;const n=(t||[]).find((t=>{var e;return"replacementPreferencesPayload"===(null===(e=t.payload)||void 0===e?void 0:e.type)}));return"replacementPreferencesPayload"===(null==n||null===(e=n.payload)||void 0===e?void 0:e.type)?null===(i=n.payload)||void 0===i?void 0:i.replacementPreferencesPayload:null},U=(t,e)=>e?t.imageUrl?[{imageUrl:t.imageUrl}]:[]:t.images||[]},64614:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(7903),o=i(43254),r=i(97174);const a=t=>{var e;const i=(0,o.Z)(),{serverCart:a}=(0,r.iQ)(),l=(0,n.UO)(),d=((null===(e=a.data)||void 0===e?void 0:e.items)||[]).find((e=>{let{shoppingCartItemUuid:i}=e;return i===t||i===l.shoppingCartItemUuid}));return{isLoading:!i||!d||!(null!=d&&d.uuid||t),cartItem:d}}}}]);