(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[89012,12305,69502,75116],{18265:(e,t,n)=>{var r="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,g=h||p||Function("return this")();var f=Array.prototype,m=Function.prototype,v=Object.prototype,b=g["__core-js_shared__"],y=function(){var e=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_=m.toString,x=v.hasOwnProperty,S=v.toString,k=RegExp("^"+_.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=g.Symbol,Z=f.splice,w=D(g,"Map"),O=D(Object,"create"),$=C?C.prototype:void 0,E=$?$.toString:void 0;function H(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function z(e,t){for(var n=e.length;n--;)if(F(e[n][0],t))return n;return-1}function I(e,t){for(var n=0,r=(t=function(e,t){if(N(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||q(e))return!0;return a.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return N(e)?e:R(e)}(t)).length;null!=e&&n<r;)e=e[A(t[n++])];return n&&n==r?e:void 0}function M(e){return!(!j(e)||function(e){return!!y&&y in e}(e))&&(function(e){var t=j(e)?S.call(e):"";return t==i||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?k:d).test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function B(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function D(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return M(n)?n:void 0}H.prototype.clear=function(){this.__data__=O?O(null):{}},H.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},H.prototype.get=function(e){var t=this.__data__;if(O){var n=t[e];return n===r?void 0:n}return x.call(t,e)?t[e]:void 0},H.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:x.call(t,e)},H.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?r:t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__,n=z(t,e);return!(n<0)&&(n==t.length-1?t.pop():Z.call(t,n,1),!0)},P.prototype.get=function(e){var t=this.__data__,n=z(t,e);return n<0?void 0:t[n][1]},P.prototype.has=function(e){return z(this.__data__,e)>-1},P.prototype.set=function(e,t){var n=this.__data__,r=z(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new H,map:new(w||P),string:new H}},T.prototype.delete=function(e){return B(this,e).delete(e)},T.prototype.get=function(e){return B(this,e).get(e)},T.prototype.has=function(e){return B(this,e).has(e)},T.prototype.set=function(e,t){return B(this,e).set(e,t),this};var R=L((function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(q(e))return E?E.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e);var t=[];return c.test(e)&&t.push(""),e.replace(l,(function(e,n,r,i){t.push(r?i.replace(u,"$1"):n||e)})),t}));function A(e){if("string"==typeof e||q(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function L(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(L.Cache||T),n}function F(e,t){return e===t||e!=e&&t!=t}L.Cache=T;var N=Array.isArray;function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function q(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==S.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:I(e,t);return void 0===r?n:r}},35089:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(23773),i=n(85019),o=n(33990);const s=e=>{const t=(0,r.T)(),{iconColor:n,iconSize:s,ariaLabel:a=t("shared.close"),...c}=e;return(0,o.tZ)("button",{"aria-label":a,...c,children:(0,o.tZ)(i.Z,{type:"Close",width:s,height:s,color:n})})}},19777:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(97802),i=n(60328);const o=(0,r.zo)("button",(e=>{let{$theme:t,radius:n}=e;return{...(0,i.Z)({$theme:t,radius:n}),textDecoration:"none",":active":{background:t.colors.backgroundSecondary}}}))},26717:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(58980),i=n(11691),o=n(72403),s=n(51811),a=n(33990);const c=()=>{const e=(0,r.TH)();return(0,a.tZ)(i.ZP,{backLocation:(0,o.N0q)(e),children:(0,a.tZ)(s.Z,{})})}},96174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(23773),i=n(97802),o=n(85019),s=n(74419),a=n(33990);const c=(0,i.zo)("button",(e=>{let{$theme:t}=e;return(0,s.Z)(t)})),l=e=>{const t=(0,r.T)();return(0,a.tZ)(c,{onClick:e.onClick,"aria-label":t("shared.goBack"),"data-testid":"dialog-back",children:(0,a.tZ)(o.Z,{type:"ArrowLeft"})})}},74419:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,i:()=>i});var r=n(46119);const i="48px",o=e=>({display:"flex",position:"absolute",top:"8px",left:"8px",height:i,width:i,alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:e.borders.radiusFull,boxSizing:"border-box",background:e.colors.backgroundPrimary,zIndex:r.I_.surface,":active":{boxShadow:"inset 0 0 0 100px rgba(0, 0, 0, 0.08)"}})},53156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(97802),i=n(74419),o=n(35089);const s=(0,r.zo)(o.Z,(e=>{let{$theme:t}=e;return(0,i.Z)(t)}))},11691:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>S,a7:()=>_,cN:()=>x});var r=n(36151),i=n(97802),o=n(18598),s=n(40668),a=n(46119),c=n(58980),l=n(8736),u=n(72403),d=n(420),h=n(28398),p=n(71946),g=n(25822),f=n(40531),m=n(33990);const v=(0,i.zo)("div",(e=>{let{$theme:t,$overlay:n,$takeOverModal:r}=e;return{display:"flex",flexDirection:"column",flex:1,background:t.colors.backgroundPrimary,maxWidth:"100%",height:"100%",position:"relative",zIndex:r?a.I_.base:a.I_.modal,...n?{position:"absolute",top:0,width:"100%"}:{}}})),b=(0,i.zo)("div",(e=>({position:e.$isStuck?"sticky":"relative",zIndex:a.I_.modal,top:0}))),y=(0,i.zo)("div",(e=>({padding:e.$removeTopPadding?"12px 16px 0 16px":"64px 16px 0 16px",height:"100%",boxSizing:"border-box"}))),_=(0,i.Le)(y,(e=>function(t){const{embeddedFeatures:n}=(0,h.v)((e=>{let{embeddedFeatures:t}=e;return{embeddedFeatures:t}})),r=n.xlbHeaderBridge,{children:i,...o}=t;return(0,m.tZ)(e,{$removeTopPadding:r,...o,children:i})})),x=o.Z,S=e=>{var t;const n=(0,c.TH)(),i=(0,l.Z)(),o=r.useContext(f.w),{backLocation:a=(0,u.W57)(n),hasBackButton:y,hasCloseButton:_=!0,inverseColor:x=!1,isHeaderStatic:S,stickyBanner:k,onClose:C=(()=>i(a)),isTakeOverModal:Z,isSecondaryCloseButton:w=!1}=e,{elementRef:O,isStuck:$}=(0,d.Z)(),{embeddedFeatures:E}=(0,h.v)((e=>{let{embeddedFeatures:t}=e;return{embeddedFeatures:t}})),H=E.xlbHeaderBridge;return(0,m.BX)(v,{$overlay:e.overlay,$takeOverModal:null!==(t=null==o?void 0:o.isTakeOverModal)&&void 0!==t?t:Z,"data-test":"mobile-dialog",children:[k?(0,m.tZ)(b,{$isStuck:$,children:(0,m.tZ)(k,{})}):null,(0,m.tZ)(g.Z,{children:(0,m.tZ)(p.Z,{})}),(0,m.tZ)(s.Z,{headerRef:O,hasBackButton:y,hasCloseButton:_,onClose:C,isSecondaryCloseButton:w,hideHeader:!0,inverseColor:x,isStuck:!H&&$,title:e.title,topRightIconButton:e.topRightIconButton,isHeaderStatic:S}),e.children]})}},40668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(97802),i=n(96174),o=n(53156),s=n(74419),a=n(35089);const c=(0,r.zo)(a.Z,(e=>{let{$theme:t}=e;return{...(0,s.Z)(t),background:t.colors.backgroundInverseSecondary}}));var l=n(46119),u=n(11131);const d=(0,r.zo)(a.Z,(e=>{let{$theme:t}=e;return{...(0,s.Z)(t),background:t.colors.primary100,color:t.colors.mono1000}}));var h=n(33990);const p=(0,r.zo)("div",(e=>({position:"sticky",top:0,zIndex:l.I_.cover,width:"100%",height:e.$hideHeader?"0px":"48px"}))),g=(0,r.zo)("div",(e=>({height:e.$isStuck||e.$isHeaderStatic?"64px":"0px",backgroundColor:e.$theme.colors.backgroundPrimary,boxShadow:e.$isStuck&&!e.$isHeaderStatic?e.$theme.shadows.divider:"",display:"flex",alignItems:"center",opacity:e.$isStuck||e.$isHeaderStatic?1:0,transition:"height 300ms ease, opacity 300ms ease",position:"absolute",width:"100%",...e.$hasButton||e.$hasTopRightIconButton?{"::before":{content:'""',flex:"1 0 ".concat(s.i)},"::after":{content:'""',flex:"1 0 ".concat(s.i)}}:{}}))),f=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,color:t.colors.contentPrimary,padding:"12px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:"1 1 auto",textAlign:"center"}})),m=(0,r.zo)("button",(e=>{let{$theme:t,$style:n}=e;return{...(0,s.Z)(t),right:"8px",left:void 0,...n}})),v=e=>{const[,t]=(0,r.hQ)();let n=null;return e.hasBackButton?n=(0,h.tZ)(i.Z,{onClick:e.onClose}):e.hasCloseButton&&(n=e.isSecondaryCloseButton?(0,h.tZ)(d,{"data-testid":"close-button",onClick:e.onClose}):e.inverseColor?(0,h.tZ)(c,{"data-testid":"close-button",onClick:e.onClose,iconColor:"contentInversePrimary"}):(0,h.tZ)(o.Z,{"data-testid":"close-button",onClick:e.onClose,iconColor:"contentPrimary"})),n||e.title?(0,h.BX)(h.HY,{children:[(0,h.tZ)("div",{ref:e.headerRef}),(0,h.BX)(p,{$hideHeader:e.hideHeader&&!e.isHeaderStatic,children:[(0,h.tZ)(g,{$isStuck:e.isStuck,$isHeaderStatic:e.isHeaderStatic,$hasButton:null!==n,$hasTopRightIconButton:Boolean(e.topRightIconButton),children:e.title?"string"==typeof e.title?(0,h.tZ)(f,{children:e.title}):e.title:null}),(0,h.tZ)(u.Z,{children:n}),e.topRightIconButton?(0,h.tZ)(m,{$style:{..."SECONDARY"===e.topRightIconButton.type?{background:t.colors.primary100}:{}},onClick:e.topRightIconButton.onClick,children:e.topRightIconButton.icon}):null]})]}):null}},57006:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(60188),i=n(36151),o=n(3494),s=n(7903),a=n(65925);const c=e=>{const t=(0,a.Z)(),n=(0,i.useCallback)((t=>{const n=function(e){if(e&&"object"==typeof e&&"string"==typeof e.type){const t=e.payload;return{type:e.type,payload:t&&"object"==typeof t?Object.keys(t).reduce(((e,n)=>(e[n]=t[n],e)),{}):null}}return null}(null==t?void 0:t.data),r=null==t?void 0:t.origin;return!!n&&e(n,r)}),[e]);(0,i.useEffect)((()=>{if(t&&r.Z)return r.Z.addEventListener("message",n),()=>{r.Z&&r.Z.removeEventListener("message",n)}}),[t,n])};var l=n(90114),u=n(90856),d=n(42982),h=n(87387),p=n(72403),g=n(67395),f=n(55618),m=n(58980),v=n(66970),b=n(94320);const y="BACK_TO_FEED",_="HELP",x="ACCOUNT",S="SHOPPING_CART",k="STORE_OVERFLOW",C=()=>{const e=(0,s.k6)(),t=(0,l.Z)(),n=(0,m.TH)(),a=(0,u.Z)(),{totalOrders:C}=(0,g.Z)(),{hydrateDelegatedBooking:Z,isDelegatedBooking:w}=(0,v.W)(),O=(0,o.Z)({page:"order"}),$=(0,p.vN_)(n,"storeOverflowActions"),{toggleIsOpen:E}=(0,h.qi)();return c((0,i.useCallback)(((n,i)=>{if(!w||b.fW.find((e=>e.test(i)))){if("CUSTOM_HEADER_ACTION"===n.type){const i=n.payload;if((null==i?void 0:i.action)===y)e.push(t);else if((null==i?void 0:i.action)===_)(0,f.Z)(O);else if((null==i?void 0:i.action)===x)E();else if((null==i?void 0:i.action)===S){if(!r.Z)return;C<=1?e.push((0,p.nQQ)(r.Z.location)):(0,p.zrB)(r.Z.location,"multicartMobileSwitcher")?e.replace((0,p.C45)(r.Z.location)):e.push((0,p.vN_)(r.Z.location,"multicartMobileSwitcher"))}else(null==i?void 0:i.action)===k&&e.push($)}else["NEW_DELEGATED_BOOKING","SPECIFIC_DELEGATED_BOOKING"].includes(n.type)&&Z(n.payload,i);"USER_TRIGGERED_IMPRESSION"===n.type&&((0,d.be)(),a({source:"user_triggered"}))}}),[e,t,O,E,C,$,a,w,Z])),null}},18598:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(97802),i=n(46119),o=n(33990);const s=(0,r.zo)("div",{height:"112px"}),a=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{padding:i.a9,position:"fixed",bottom:0,left:0,right:0,zIndex:i.I_.cover,...t.overlays.floatingButtonGradient}}));function c(e){return(0,o.BX)("div",{children:[(0,o.tZ)(s,{}),(0,o.tZ)(a,{children:e.children})]})}},47451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(97802),i=n(75057),o=n(46119),s=n(33990);const a=(0,r.zo)("div",(e=>{let{$reverse:t}=e;return{display:"flex",position:"relative",flexDirection:t?"row-reverse":"row"}})),c=(0,r.zo)("input",(e=>{let{$theme:t,checked:n}=e;return{position:"absolute",opacity:0,pointerEvents:"none",outline:"none",":focus[data-focus-visible-added]+label:before":{...n?{boxShadow:"0 0 0 2px ".concat(t.colors.focus)}:{border:"solid 3px ".concat(t.colors.borderSelected)}}}})),l=e=>encodeURIComponent('\n  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0V20H20V0H0ZM8.5 15.1L2.90002 9.5L5 7.39999L8.40002 10.8L14.8 4.39999L16.9 6.5L8.5 15.1Z" fill="'.concat(e,'" />\n  </svg>\n  ')),u=(0,r.zo)("label",(e=>{let{$checked:t,$disabled:n,$reverse:r,$theme:i}=e;return{...i.typography.LabelMedium,width:"100%",display:"flex",boxSizing:"border-box",alignItems:"center",flexDirection:r?"row-reverse":"row",justifyContent:"space-between",cursor:"pointer",fontSize:"16px",lineHeight:"20px",transition:"background-color 100ms ease 0s",":before":{flex:"none",display:"flex",boxSizing:"border-box",border:"solid 3px ".concat(n?i.colors.disabled:i.colors.tickBorder),...t?{border:"0",backgroundColor:i.colors.tickMarkFill,backgroundImage:"url('data:image/svg+xml,".concat(l(i.colors.tickFillSelected),"');"),backgroundPosition:"center center",backgroundSize:"cover"}:{},content:"''",cursor:"pointer",height:o.sh,width:o.sh,verticalAlign:"middle"}}})),d=e=>(0,s.BX)(a,{$reverse:Boolean(e.reverse),children:[e.startElement,(0,s.tZ)(c,{type:"checkbox",id:e.id,name:e.name,value:e.value,checked:e.isChecked,disabled:Boolean(e.isDisabled),onChange:e.onChange}),(0,s.BX)(u,{htmlFor:e.id,$disabled:Boolean(e.isDisabled),$reverse:e.reverse,$checked:e.isChecked,children:[(0,s.tZ)(i.ZP,{$width:"16px"}),e.children]})]})},69107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(36151),i=n(58980),o=n(44815),s=n(72403),a=n(33990);const c=e=>{var t;const n=(0,i.TH)(),c=o.parse(n.search),l=null!==(t=c[s.FSm.modalContext])&&void 0!==t?t:"";if(c[s.FSm.modalName]===e.modalName||c[s.FSm.popoverName]===e.modalName){if(e.children)return r.Children.map(e.children,(e=>r.cloneElement(e,{modalContext:l})));const t=e.component;if(t)return(0,a.tZ)(t,{modalContext:l})}return null}},29008:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>f,h7:()=>p,sO:()=>d,zD:()=>g});var r=n(36151),i=n(7903),o=n(97802),s=n(26188),a=n(46119),c=n(90717),l=n(40531),u=n(33990);const d=(0,o.zo)("div",(e=>{let{$theme:t,$isFullPopOver:n}=e;return{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:a.I_.modal,...n?t.overlays.full:{}}})),h=(0,o.zo)("div",(e=>{let{$theme:t,$rounded:n}=e;return{position:"absolute",left:0,right:0,bottom:0,maxHeight:"100%",overflowY:"auto",background:t.colors.backgroundPrimary,borderRadius:n?"16px 16px 0 0":0,overscrollBehaviorY:"contain"}})),p=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,padding:"24px 16px 32px"}})),g=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,padding:"24px 16px 32px",display:"flex",alignItems:"center",flexDirection:"column"}})),f=e=>{const t=(0,r.useRef)(null),n=(0,i.k6)(),o="boolean"!=typeof e.isFullPopOver||e.isFullPopOver;(0,s.Z)(o);const a=e.handleClick,p=(0,r.useCallback)((e=>{if(e.target===e.currentTarget)return a?a():void n.goBack()}),[a,n]);(0,c.Z)(t,(()=>{e.onOutsideClick&&e.onOutsideClick()}),!0);const g=(0,r.useContext)(l.w);return(0,r.useEffect)((()=>{null!=g&&g.isTakeOverModal,0}),[null==g?void 0:g.isTakeOverModal]),(0,u.tZ)(d,{onClick:e=>p(e),$isFullPopOver:o,children:(0,u.tZ)(h,{$rounded:e.rounded,ref:t,children:e.children})})}},36143:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ne});var r=n(36151);const i=()=>{},o=e=>!(!e||"object"!=typeof e)&&("function"==typeof e.timing&&"function"==typeof e.increment),s=()=>({increment:i,timing:i}),a=e=>{try{const t=JSON.parse(e);return"object"==typeof t?t:{}}catch(e){return{}}},c=e=>{let t=!1;return(n,r)=>{t||(t=!0,e(n,r))}},l=(e,t)=>{if(e.xhr.readyState===e.xhr.UNSENT||e.xhr.readyState===e.xhr.DONE)return;Date.now()-e.lastResponse>t&&e.xhr.abort(),setTimeout(l,t,e,t)};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}const d={ACK:"/events/ack",RECV:"/events/recv"},h={dca1:"dca",phx2:"phx"},p=(e,t,n)=>{switch(n){case"sameorigin":return"/ramen".concat(h[t]).concat(d[e]||"");case"breeze":return"https://ramen".concat(h[t],".uber.com").concat(d[e]||"");case"openid":return"https://ramen".concat(h[t],".uberinternal.com").concat(d[e]||"");default:return"https://cn-".concat(t,".uber.com/ramen").concat(d[e]||"")}},g={altitude:"x-uber-device-location-altitude",app:"x-uber-client-name",authorization:"Authorization",device:"x-uber-device",deviceId:"x-uber-device-id",deviceIds:"x-uber-device-ids",deviceModel:"x-uber-device-model",deviceOS:"x-uber-device-os",epoch:"x-uber-device-epoch",language:"x-uber-device-language",latitude:"latitude",longitude:"longitude",origin:"x-uber-origin",regionId:"x-uber-region-id",service:"x-uber-push-service",source:"x-uber-source",token:"x-uber-token",uuid:"x-uber-uuid",version:"x-uber-client-version",screenflowVersion:"x-uber-screenflow-client-version",appVariant:"x-uber-app-variant"},f=e=>(e.hasOwnProperty("device")||(e.device="web"),Object.keys(e).map((t=>{const n=g[t],r=e[t];if(n&&r)return[n,e[t]]})).filter(Boolean)),m=(e,t)=>e.slice(-1)===t?e.slice(0,-1):e,v=new RegExp(/\n\n$/),b=new RegExp(/^(close|data|event|id|):\s?(.*)/),y=e=>{let[t,n]=["",""];const r=b.exec(e);return r&&3===r.length&&([,t,n]=r),e.length>0&&!e.includes(":")&&(t=e),[t,n]},_=(e,t,n)=>{switch(t){case"event":e.name=n;break;case"data":e.data="".concat(e.data||"").concat(n,"\n");break;case"id":e.id=n}return e},x=e=>{let t={data:"",name:""},n="";return r=>{if(n+=r,v.test(n)){n=m(n,"\n");for(const r of n.split("\n")){if(""===r){t.data=m(t.data||"","\n"),e(t),t={data:"",name:""},n="";continue}if(":"===r[0])continue;const[i,o]=y(r);t=_(t,i,o)}}}};var S=n(47265);function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C="undefined"!=typeof process&&process.release&&"node"===process.release.name,Z=e=>"function"==typeof e?e():null,w=(e,t,n)=>({code:t,error:n,stopped:e});class O{constructor(e){k(this,"authenticateUser",(e=>{if(!this.authenticationMethod||"sameorigin"===this.authenticationMethod)return void e();if("undefined"==typeof fetch||fetch.polyfill||C)return void e(w(!0,"unsupported_browser"));const t=p("ACK",this.session.datacenter,this.authenticationMethod);fetch("".concat(t,"?seq=-1"),{credentials:"include",mode:"no-cors"}).then((e=>e.ok?e:fetch("".concat(t,"?seq=-1"),{credentials:"include"}))).then((t=>{const n=200===t.status?void 0:w(!0,"authentication_failed");e(n)})).catch((t=>e(w(!0,"authentication_failed",t))))})),k(this,"startPolling",(e=>{const t=p("RECV",this.session.datacenter,this.authenticationMethod),n="".concat(t,"?seq=").concat(this.session.seq),r=[...f(this.user),["cache-control","no-cache"],["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean);this.session.stopPolling=((e,t)=>{const n=new XMLHttpRequest,r=c(t.onDisconnect),i=c(t.onConnect),o={lastResponse:Date.now(),xhr:n};let s=0,a=0;return n.onreadystatechange=()=>{if(n.readyState===n.LOADING||n.readyState===n.DONE){n.status<400&&i(null),o.lastResponse=Date.now();const e=n.responseText.substring(a);a=n.responseText.length,t.callback(e)}const e=n.readyState<s;if(s=Math.max(n.readyState,s),n.readyState===n.DONE||e){let i={connectionClosed:n.readyState===n.DONE,responseText:n.responseText,statusCode:n.status,timestamp:(new Date).toISOString(),userAborted:e};t.returnHeaders&&(i={...i,requestHeaders:n._headers,responseHeaders:n.responseHeaders}),r(null,i)}},n.onerror=e=>{n.abort(),r(new Error(e))},n.open("GET",e),n.withCredentials=!0,t.headers.map((e=>{let[t,r]=e;return n.setRequestHeader(t,r)})),n.send(),o.lastResponse=Date.now(),l(o,t.disconnectInterval),()=>n.abort()})(n,{callback:u(x(this.handleEvent),this.maybeSendAck),disconnectInterval:2e4,headers:r,onDisconnect:e,returnHeaders:this.returnHeaders,onConnect:()=>{this.manager&&this.manager.notifyConnection(this)}})})),k(this,"retryPolling",(()=>{const e=Date.now();this.m3Client.increment("request",{method:"recv"}),this.didFirstPoll||(this.m3Client.timing("client-ready",Date.now()-this.initTimestamp),this.didFirstPoll=!0),this.startPolling(((t,n)=>{this.session.active?(t?this.callback(w(!1,"client_error",t),null,this):this.callback(w(!1,"client_disconnected",n),null,this),this.m3Client.timing("latency",Date.now()-e,{method:"recv"}),setTimeout(this.retryPolling,5e3)):this.callback(w(!0,"session_inactive",t),null,this)}))})),k(this,"sendAck",(()=>{const e=p("ACK",this.session.datacenter,this.authenticationMethod),t=Date.now();this.m3Client.increment("request",{method:"ack"}),((e,t,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=()=>{if(r.readyState===r.DONE){if(r.status<200||r.status>=300){let e={message:r.responseText,status:r.status};return t.returnHeaders&&(e={...e,requestHeaders:r._headers,responseHeaders:r.responseHeaders}),void n(e)}n(null,a(r.responseText))}},r.open(t.method,e),r.timeout=t.timeout||3e4,r.withCredentials=!0,t.headers.map((e=>{let[t,n]=e;return r.setRequestHeader(t,n)})),r.send(t.body||null)})("".concat(e,"?seq=").concat(this.session.seq),{headers:[...f(this.user),["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean),method:"GET",returnHeaders:this.returnHeaders},(e=>{e&&this.callback(w(!1,"ack_failed",e),null,this),this.m3Client.timing("latency",Date.now()-t,{method:"ack"})}))})),k(this,"handleEvent",(e=>{if((e=>!(e.name||e.data||e.seq))(e))return;if("close"===e.name)return void Z(this.session.stopPolling);const{msg:t}=a(e.data);"rmn-msg-v1"===e.name&&Array.isArray(t)?t.map(this.handleMessage):this.callback(w(!1,"unrecognised_message",e),null,this)})),k(this,"handleMessage",(e=>{Number.isFinite(e.seq)&&e.seq>this.session.seq&&(this.session.seq=e.seq),this.callback(null,e,this)})),k(this,"stop",(()=>{this.session.active=!1,Z(this.session.stopPolling)})),this.callback=e.callback,this.user=e.user,this.manager=e.manager,this.authenticationMethod=e.authenticationMethod,this.session={active:!0,datacenter:e.datacenter,seq:0,uuid:(0,S.Z)()},this.m3Client=o(e.m3Client)?e.m3Client:s(),this.initTimestamp=Date.now(),this.didFirstPoll=!1,e.returnHeaders&&(this.returnHeaders=!0),this.authenticateUser((e=>{if(e)return this.session.active=!1,void this.callback(e,null,this);this.maybeSendAck=((e,t)=>{let n=Date.now();return r=>(Date.now()-n>=t&&(n=Date.now(),e()),r)})(this.sendAck,3e4),this.retryPolling()}))}}var $=n(18265),E=n.n($);const H=["phx2","dca1"];const P=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.user)throw new Error("RamenJS init error: `options.user` is required");if(!e.user.app)throw new Error("RamenJS init error: `options.user.app` is a required field");this.handlers={message:[],connect:[],disconnect:[],error:[]},this.clients=[],this.disconnectionTimeout=e.disconnectionTimeout||15e3,this.user=e.user;const t=e.dc||e.datacenter||H;return this.dcs=(Array.isArray(t)?t:[t]).reduce(((e,t)=>(e[t]={status:"disconnected",timeout:null},e)),{}),this.authenticationMethod=e.authenticationMethod||"sameorigin",this.m3Client=o(e.m3Client)?e.m3Client:s(),this.mockedClient=e.mockedClient||!1,this}on(e,t){return this.handlers.hasOwnProperty(e)&&(this.handlers[e].push(t),this.initializeClients()),this}off(e,t){if(!this.handlers.hasOwnProperty(e))return this;if(!t&&this.handlers[e].length)this.handlers[e]=[];else{const n=this.handlers[e].indexOf(t);-1!==n&&this.handlers[e].splice(n,1)}return this.hasSubscribers()||this.stopClients(),this}initializeClients(){this.clients.length||this.mockedClient||Object.keys(this.dcs).forEach((e=>{const t=new O({datacenter:e,user:this.user,authenticationMethod:this.authenticationMethod,m3Client:this.m3Client,callback:this.handleClientResponse.bind(this),manager:this});this.clients.push(t)}))}handleClientResponse(e,t,n){if(e){const t=n.session.datacenter;this.dcs[t]&&(this.dcs[t].lastError=e,this.dcs[t].timeout||"disconnected"===this.dcs[t].status||(this.dcs[t].timeout=setTimeout((()=>{this.dcs[t].status="disconnected",this.dcs[t].timeout=null,this.trigger("disconnect",{...this.getConnectionStatus(),error:this.dcs[t].lastError},n)}),this.disconnectionTimeout))),this.trigger("error",e,n)}else if(t){let e=t.msg;try{e=JSON.parse("".concat(e))}catch(e){this.trigger("error","parsing error ".concat(e),n)}this.trigger("message",{...t,msg:e},n)}}trigger(e,t,n){const r=n?{dc:E()(n,"session.datacenter")}:{};this.handlers[e].forEach((e=>{e(t,r)}))}stopClients(){}hasSubscribers(){for(let e of Object.keys(this.handlers))if(this.handlers[e].length)return!0;return!1}getConnectionStatus(){let e=!1,t=!1;return{details:Object.keys(this.dcs).reduce(((n,r)=>{const i=this.dcs[r].status;return"connected"===i?t=!0:e=!0,n[r]=i,n}),{}),status:t?e?"limited":"connected":"disconnected"}}notifyConnection(e){const t=e.session.datacenter,n=E()(this.dcs[t],"timeout");clearTimeout(n);let r="connected"!==E()(this.dcs[t],"status");this.dcs[t]={status:"connected",timeout:null,lastError:null},r&&this.trigger("connect",this.getConnectionStatus(),e)}};var T=n(7903),z=n(69502),I=n(92036),M=n(16688),B=n(86298),D=n(47721),R=n(11183),A=n(28398),L=n(72403),F=n(19474),N=n(51630),j=n(54947),q=n(7042),U=n(58793),X=n(20034),G=n(58980),V=n(16647),K=n(28147),J=n(81999),Q=n(40269),W=n(79195),Y=n(27009),ee=n(44815);const te=["pendingRating","ratingSubmitted","orderRating"];const ne=()=>{var e;const t=(0,X.Z)(),n=(0,N.Z)(),i=(0,F.ZP)(),o=(0,T.k6)(),s=(0,G.TH)(),a=(0,z.Z)(),{user:c}=(0,I.Z)(),l=null===(e=c.data)||void 0===e?void 0:e.isLoggedIn;let u=(0,M.Z)("web_ramen");const d=(0,M.Z)("nsw_age_verification"),h=(0,R.I0)(),p=(0,A.v)((e=>{let{ramen:t}=e;return t})),g=(0,r.useRef)(0),f=(0,r.useRef)(null),m=(0,r.useRef)({}),v="postmates"===(0,j.Z)(),b=(0,U.kR)(t),y=function(){const e=(0,M.Z)("eater_message_interstitials"),t=(0,K.Z)(),n=(0,F.ZP)(),{search:i,pathname:o}=(0,G.TH)(),{getEaterMessageInterstitialSessionCapper:s}=(0,J.Z)(),{isSavingsLanding:a,isSavingsLandingInterstitial:c}=(0,W.Z)(),l=a||c,u=(0,r.useCallback)((e=>Boolean((0,T.LX)(o,e))),[o]);return(0,r.useCallback)((r=>{var o;if(null==r||null===(o=r.messages)||void 0===o||!o.length)return!1;const{surface:a,surfaceId:c,message:d}=r.messages[0]||{},h=t({surface:a,surfaceId:c,...d});n("eats:eater_message_ramen_log",{eaterMessage:{ramenMsg:JSON.stringify(r),surface:c||V.cx.UNKNOWN}});const p=String(ee.parse(i)[L.FSm.modalName]),g=te.includes(p),f=Boolean(h),m=null==h?void 0:h.payload,v="modalPayload"===(null==m?void 0:m.type)&&(null==m?void 0:m.modalPayload.uuid)||"",{hasPromotionBanner:b}=(0,Q.X)(h);switch(c){case V.cx.HOME_FEED_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.HOME_FEED_PUSH_BOTTOM_MODAL,v)&&f&&!b&&!l&&u(Y.r.home_feed);case V.cx.VERTICAL_FEED_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.VERTICAL_FEED_PUSH_BOTTOM_MODAL,v)&&f&&!b&&u(Y.r.vertical_feed);case V.cx.ORDER_TRACKING_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.ORDER_TRACKING_PUSH_BOTTOM_MODAL,v)&&f&&!u(Y.r.vertical_feed);case V.cx.ORDER_COMPLETE_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.ORDER_COMPLETE_PUSH_BOTTOM_MODAL,v)&&!g&&f;default:return!1}}),[i,e,s,n,t,l,u])}(),_=(0,r.useContext)(q.k),x=(0,r.useCallback)((e=>{_.set("chatMessageUuid",e)}),[_]),k=(0,r.useCallback)((e=>{switch(e.type){case"chat":return void("system"!==e.msg.messageType&&x(e.uuid));case"eater_message_service_screen_messages":if(y(e.msg)){const t=(e.msg.messages||[])[0].surfaceId||"";o.push((0,L.tLx)(s,t))}return;case"home_membership_modal":return i("eats:home_membership_modal_ramen_message_received"),void o.push((0,L.bAD)(s,e.uuid));case"push_web_eats_verification_result":return void(d&&o.push((0,L.fDg)(s,e.msg.flowStatus)));default:return}}),[x,y,o,s,i,d]);return(0,r.useEffect)((()=>{if(p.messageQueue.length>0&&g.current<p.messageQueue.length){for(let e=g.current;e<p.messageQueue.length;e++){const t=p.messageQueue[e]||"",n=p.messageMap[t];n&&k(n)}g.current=p.messageQueue.length}}),[k,p]),(0,r.useEffect)((()=>{u&&l&&!f.current&&(f.current=new P({m3Client:a,user:{app:"eats_web",device:"eats-web",deviceId:b||(0,S.Z)(),language:n,origin:"eats-web",source:"eats-web",version:"1.0.0",appVariant:v?"postmates":"ubereats"}}).on("message",(e=>{const t=(0,B.n)(e);return t&&!m.current[t.uuid]&&h((0,D.l)(t)),t&&(m.current[t.uuid]=!0),()=>{f.current&&f.current.off("message")}})))}),[h,l,u,n,a,v,b]),null}},23427:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(43193),i=n(97802),o=n(17308),s=n(47205),a=n(33990);const c=e=>({body1:{fontSize:e.typography.ParagraphXSmall.fontSize,lineHeight:e.typography.ParagraphXSmall.lineHeight},body2:{fontSize:e.typography.ParagraphSmall.fontSize,lineHeight:e.typography.ParagraphSmall.lineHeight},body3:{fontSize:e.typography.ParagraphMedium.fontSize,lineHeight:e.typography.ParagraphMedium.lineHeight},title1:{fontSize:e.typography.ParagraphLarge.fontSize,lineHeight:e.typography.ParagraphLarge.lineHeight},title2:{fontSize:e.typography.HeadingXSmall.fontSize,lineHeight:e.typography.HeadingXSmall.lineHeight},title3:{fontSize:e.typography.HeadingSmall.fontSize,lineHeight:e.typography.HeadingSmall.lineHeight},title4:{fontSize:e.typography.HeadingMedium.fontSize,lineHeight:e.typography.HeadingMedium.lineHeight},title5:{fontSize:"44px",lineHeight:"52px"},title6:{fontSize:"48px",lineHeight:"56px"}}),l=(e,t,n)=>({...t?{fontFamily:"medium"===t?e.typography.LabelMedium.fontFamily:e.typography.ParagraphMedium.fontFamily}:null,...n?c(e)[n]:null}),u=(0,i.zo)("div",{display:"table"}),d=(0,i.zo)("img",{verticalAlign:"middle"}),h=(0,i.zo)("span",(e=>{let{$color:t,$fontSize:n,$fontStyle:r,$textDecoration:i,$theme:o}=e;return{...l(o,r,n),...t?{color:t in o.colors?o.colors[t]:t}:null,...i?{textDecoration:i}:null,verticalAlign:"middle"}})),p=(0,i.zo)("a",(e=>{let{$color:t,$fontSize:n,$fontStyle:r,$theme:i}=e;return{...(0,s.lE)({$theme:i}),...l(i,r,n),verticalAlign:"middle",...t?{color:t in i.colors?i.colors[t]:t}:{}}}));function g(e){return(0,a.tZ)(a.HY,{children:e.lines.map(((t,n)=>(0,a.BX)(r.Fragment,{children:[(0,a.tZ)(u,{children:t.children.map(((e,t)=>"img"===e.type?(0,a.tZ)(d,{width:e.width,height:e.height,src:e.url},t):"text"===e.type?(0,a.tZ)(h,{...e.$as?{$as:e.$as}:null,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,$textDecoration:e.textDecoration,children:e.text},t):"anchor"===e.type?(0,a.tZ)(p,{href:e.href,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,children:e.text},t):null))}),"paragraph"===t.breakStyle&&n!==e.lines.length-1?(0,a.tZ)(o.ZP,{$height:16}):null,"heading"===t.breakStyle?(0,a.tZ)(o.ZP,{$height:8}):null]},n)))})}},54609:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(28398),i=n(30509);const o=()=>(0,r.v)((e=>{let{features:t}=e;return t}))[i.h6.capital_one_promo]},81999:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(36151),i=n(70192),o=n(20034),s=n(58793);const a="uev2.messaging-interstitial-session-capper";function c(){const e=(0,o.Z)(),t=(0,s.Yk)(e),n=(0,i._)(),c=(0,r.useCallback)((()=>n.get(a)||{}),[n]);return{getEaterMessageInterstitialSessionCapper:(0,r.useCallback)(((e,n)=>{const r=c()[e];return(null==r?void 0:r.sessionId)===t&&((null==r?void 0:r.campaigns)||[]).includes(n)}),[c,t]),setEaterMessageInterstitialSessionCapper:(0,r.useCallback)(((e,r)=>{const i=c(),o=i[e],s=(null==o?void 0:o.sessionId)===t&&null!=o&&o.campaigns?o.campaigns:[];s.includes(r)||s.push(r),i[e]={sessionId:t||"",campaigns:s},n.set(a,i)}),[n,t,c])}}},96900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(42529),i=n(26701);const o=()=>(0,r.ip)({...i.J.scheduled_order_editing,defaultValue:!1})},74916:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(42529),i=n(26701);function o(){return(0,r.ip)({...i.J.is_healthcare_card_enabled,defaultValue:!1})}},17162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(42529),i=n(26701);const o=()=>(0,r.ip)({...i.J.is_repeat_group_order_enabled,defaultValue:!1})},12305:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(42529),i=n(88655);const o=()=>{const e={...i.v.store_precheckout_bundling,defaultValue:!1};return{isStorePrecheckoutBundlingEnabled:(0,r.ip)(e)}}},69502:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(13755),i=n(99464);function o(){return(0,r.G2)(i.EK)}},420:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(36151),i=n(56530);const o=()=>{const[e,t]=(0,r.useState)(!1),[n,o]=(0,i.Z)({root:null});return(0,r.useEffect)((()=>{o&&(e||o.isIntersecting||t(!0),e&&o.isIntersecting&&t(!1))}),[o,e]),{elementRef:n,isStuck:e}}},90856:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(36151),i=n(28398),o=n(7042),s=n(87004),a=n(65925);function c(){const e=(0,a.Z)(),t=(0,i.v)((e=>{let{embeddedFeatures:t}=e;return t})),n=(0,r.useContext)(o.k),c=(0,s.Z)("emitXlbHomeFeedEventV1");return(0,r.useCallback)((r=>{let{source:i}=r;if(!e)return;let o=!0;if(t.prefetch){n.set("uev2.xlb_".concat(i,"_impression"),"true");const e=n.get("uev2.xlb_feed_loaded_impression"),t=n.get("uev2.xlb_user_triggered_impression");o=e&&t}o&&c()}),[e,t.prefetch,n,c])}}}]);