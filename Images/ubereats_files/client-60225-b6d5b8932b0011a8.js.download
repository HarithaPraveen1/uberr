"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[60225],{60059:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(43193),a=i(97802),s=i(68689);const r={tiny:1,small:4,regular:8},o=[r.tiny,r.small],l=[r.small,r.tiny],d=function(){let{maxDots:e=0,pageId:t=0,dotsSize:i,dotsSizeSequence:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from({length:e},((e,a)=>({pageId:t+a,dotSize:i||n[a]||r.regular})))};var c=i(33990);const u=(0,a.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),p=(0,a.zo)("li",(e=>{let{$theme:t,$filled:i,$inversedDotColor:n,$dotsSize:a=8,$margin:r=4}=e;return{borderRadius:"50%",width:"".concat(a,"px"),height:"".concat(a,"px"),margin:"0 ".concat(r,"px"),cursor:"pointer",...i?{background:n?t.colors.black:t.colors.white}:{background:n?(0,s.uE)(t.colors.black,.24):(0,s.uE)(t.colors.white,.6)}}}));const m=function(e){const{currentPage:t,pages:i,inversedDotColor:a,fullDots:s=!0,dotsSize:m}=e,g=n.useMemo((()=>s?4:8),[s]),f=n.useMemo((()=>function(){let{currentPage:e=0,pages:t=1,startFrom:i=0,dots:n=5,outermostDots:a=2,fullDots:s=!0,dotsSize:c=r.regular}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s)return d({maxDots:t,pageId:i,dotsSize:c});if(t<=1)return d({maxDots:1,pageId:i,dotsSize:r.regular});const u=t-1;e=Math.min(Math.max(e,i),u);const p=e+1,m=Math.min(t,n),g=Math.max(p-m,0),f=Math.max(Math.min(g,a),0),h=Math.max(p-m-f,0),v=h+f,S=Math.max(t-m,0),y=p>m?t-p:S,x=Math.max(Math.min(y,a),0),w=d({maxDots:f,pageId:h,dotsSizeSequence:1===f?o.slice(1):o}),b=d({maxDots:m,pageId:v,dotsSize:r.regular}),I=b[b.length-1].pageId+1,E=d({maxDots:x,pageId:I,dotsSizeSequence:1===y&&f>0?[r.regular]:l});return[...w,...b,...E]}({currentPage:t,pages:i,fullDots:s,dotsSize:m})),[t,i,s,m]);return(0,c.tZ)(u,{children:f.map((t=>{let{pageId:i,dotSize:n}=t;return(0,c.tZ)(p,{$inversedDotColor:a,$filled:i===e.currentPage,$dotsSize:n,$margin:g,onClick:t=>{t.stopPropagation(),e.onClick(i)}},i)}))})}},44042:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(97802),a=i(87723),s=i(60059),r=i(86693),o=i(33990);const l=(0,n.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),d=(0,n.zo)("li",(e=>{let{$dotsSize:t=4,$theme:i}=e;return{borderRadius:"50%",width:"".concat(2*t,"px"),height:"".concat(2*t,"px"),margin:"0 3px",background:i.colors.backgroundPrimary}}));const c=function(e){return(0,o.tZ)(l,{children:[...Array(e.pages).keys()].map((t=>(0,o.tZ)(d,{$dotsSize:t===e.currentPage?(e.dotsSize||0)+2:e.dotsSize,onClick:i=>{i.stopPropagation(),e.onClick(t)}},t)))})};var u=i(43193),p=i(47142),m=i(75057),g=i(49368),f=i(46119);const h=(0,n.zo)("div",{padding:"8px",boxSizing:"border-box",position:"absolute",bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"flex-start",overflowY:"hidden",overflowX:"scroll",flexWrap:"nowrap",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},boxShadow:"0px -4px 16px rgba(0, 0, 0, 0.12)",scrollBehavior:"smooth",transition:f.pB.default});function v(e){let{currentDisplayIndex:t,slides:i,renderPaginationSlide:n,onClick:a,paginationSlideSize:s}=e;const r=u.useRef(null),l=(0,g.gm)();return u.useEffect((()=>{if(!r.current)return;const e=r.current.scrollWidth;if(t>=3)if("ltr"===l)r.current.scrollLeft=(t-3)*(s+8);else{const i=e-(t-3)*(s+8);r.current.scrollLeft=i}else("ltr"===l&&r.current.scrollLeft>=t*(s+8)||"rtl"===l&&e-r.current.scrollLeft<t*(s+8))&&(r.current.scrollLeft=t*(s+8))}),[t,s,l]),(0,o.tZ)(h,{ref:r,children:(0,o.tZ)(p.Z,{separator:()=>(0,o.tZ)(m.ZP,{$width:"8px"}),children:i.map(((e,i)=>(0,o.tZ)("div",{onClick:()=>a(i),children:n({slide:e,isActive:i===t,index:i})},i)))})})}const S=(0,n.zo)("div",(e=>{let{$height:t,$overflowVisible:i,$disabled:n}=e;return{position:"relative",width:"100%",overflow:i?"visible":"hidden",...t?{height:t}:{},pointerEvents:"".concat(n?"none":"auto")}})),y=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",bottom:0,width:"100%",padding:"".concat(t.sizing.scale500," 0")}})),x=(0,n.zo)("div",(e=>{let{$dotsBottomPosition:t="16px"}=e;return{bottom:t,position:"absolute",padding:0,margin:"0 auto",width:"100%"}}));function w(e){const{displaySlides:t,displayIndex:i,displayOffset:n,useTransition:l,stopAutoScroll:d,changeDisplaySlide:u,onTransitionEnd:p}=(0,r.Z)({slides:e.slides,pageSize:1,autoScrollInterval:e.autoScrollInterval,onSlidesDisplayed:e.onSlidesDisplayed,initialIndex:e.initialIndex,isInfinite:e.isInfinite,peekAnimation:e.peekAnimation});return 0===e.slides.length?null:1===e.slides.length&&e.slides[0]?(0,o.tZ)(S,{$height:e.height,children:(0,o.tZ)(a.M,{$as:"div",$margin:e.margin,children:e.renderSlide({slide:e.slides[0],carouselSlideProps:{isDummy:!1,isVisible:!0,index:0}})})}):(0,o.BX)(S,{$height:e.height,$overflowVisible:e.overflowVisible,$disabled:e.disabled,children:[(0,o.tZ)(a.Z,{displayIndex:i,displayOffset:n,displaySlides:t,onSwipe:d,renderSlide:e.renderSlide,useTransition:l,onTransitionEnd:()=>{if(p(),"function"==typeof e.onTransitionEnd){const t=e.slides[i];e.onTransitionEnd(i,t)}},changeDisplaySlide:u,margin:e.margin,isInfinite:e.isInfinite}),"regular"===e.dotsType?(0,o.tZ)(x,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,o.tZ)(s.Z,{dotsSize:e.dotsSize,pages:e.slides.length,inversedDotColor:e.inversedDotColor,currentPage:i,fullDots:e.fullDots,onClick:e=>{u({index:e})}})}):null,"large"===e.dotsType?(0,o.tZ)(y,{children:(0,o.tZ)(x,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,o.tZ)(c,{dotsSize:e.dotsSize,pages:e.slides.length,currentPage:i,onClick:e=>{u({index:e})}})})}):null,e.paginationSlideProps?(0,o.tZ)(v,{currentDisplayIndex:i,slides:e.slides,renderPaginationSlide:e.paginationSlideProps.renderPaginationSlide,onClick:e=>u({index:e}),paginationSlideSize:e.paginationSlideProps.slideSize}):null]})}},87723:(e,t,i)=>{i.d(t,{M:()=>c,Z:()=>u});var n=i(36151),a=i(43193),s=i(97802),r=i(78204),o=i(49368),l=i(33990);const d=(0,s.zo)("ol",(e=>({margin:0,padding:0,display:"flex",userSelect:"none",willChange:"transform",...e.$useTransition?{transition:"transform 200ms ease-in-out"}:{}}))),c=(0,s.zo)("li",(e=>{let{$margin:t}=e;return{width:"100%",margin:"0 ".concat(t/2,"px"),flex:"none",display:"flex"}}));function u(e){let{displaySlides:t,renderSlide:i,displayIndex:s,displayOffset:u,useTransition:p,onTransitionEnd:m,onSwipe:g,changeDisplaySlide:f,margin:h,isInfinite:v}=e;const S=(0,n.useRef)(null),y=(0,o.gm)(),x=t.findIndex((e=>{let{displayIndex:t}=e;return t===s}));(0,r.Z)({swipeTargetRef:S,onSwipeMove:(0,n.useCallback)((e=>{const i=0===s?1:-1,n=(s===t.length-1&&e<0||0===s&&e>0)&&!v,a=Math.abs(e)>40?40*i:e;f({index:s,offset:n?a:e,useTransition:!1}),g&&g()}),[s,f,g,t.length,v]),onSwipeEnd:(0,n.useCallback)((e=>{Math.abs(e)<40?f({index:s,offset:0}):e<0?f({index:"ltr"===y?"forward":"back"}):e>0&&f({index:"ltr"===y?"back":"forward"})}),[s,f,y])});const w=a.useMemo((()=>t.map(((e,t)=>{let{slide:n,displayIndex:a,isDummy:r}=e;return(0,l.tZ)(c,{"aria-hidden":!!r||void 0,$margin:h,children:i({slide:n,carouselSlideProps:{isDummy:r,isVisible:a===s,index:t}})},a)}))),[i,t,s,h]),b="ltr"===y?-1:1;return(0,l.tZ)(d,{$useTransition:p,style:{transform:"translateX(".concat(x*b*100,"%)")+" "+"translateX(".concat(u,"px)")+"translateX(".concat(x*b*h+b*h/2,"px)")},ref:S,onTransitionEnd:m,children:w})}},60225:(e,t,i)=>{i.d(t,{Z:()=>R});var n=i(16647),a=i(42529),s=i(41433),r=i(44042),o=i(69476),l=i(71539),d=i(60663);const c={titleFont:{[n._u.REGULAR]:{LEVEL_1:{typographyName:"DisplayBold5XSmall",lineHeight:"22px",fontSize:"18px"},DEFAULT:{typographyName:"DisplayBold4XSmall",lineHeight:"28px"}},[n._u.SMALL]:{LEVEL_1:{typographyName:"LabelXSmall"},DEFAULT:{typographyName:"LabelMedium"}}}},u=(e,t,i)=>({CARD:{getContentPadding:e=>t===n._u.REGULAR?e===l.zK.FULLWIDTH?{padding:"12px 16px"}:"ltr"===i?{padding:"12px 8px 12px 16px"}:{padding:"12px 16px 12px 8px"}:{padding:"12px 16px"},getTitleFont:e=>{let{$theme:i,$fontSizeLevel:n=2}=e;const a=(0,d.Om)(t),s=1===n?"LEVEL_1":"DEFAULT",r=c.titleFont[a][s];return{...i.typography[r.typographyName],..."lineHeight"in r?{lineHeight:r.lineHeight}:{},..."fontSize"in r?{fontSize:r.fontSize}:{}}},getSubtitleFont:e=>{let{$theme:i}=e;return t===n._u.REGULAR?i.typography.ParagraphXSmall:i.typography.ParagraphSmall},getCtaFont:e=>{let{$theme:t}=e;return{...t.typography.LabelXSmall,paddingTop:t.sizing.scale100,paddingBottom:t.sizing.scale100,paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300}},getLayoutSize:()=>t===n._u.REGULAR?{minHeight:"".concat(s.lC,"px"),cardAspectRatio:"".concat(100*s.Jh,"%"),splitImageAspectRatio:"".concat(100*s.Bu,"%"),splitImageFit:"cover",spacer:"4px"}:{minHeight:"".concat(s.PO,"px"),cardAspectRatio:"".concat(100*s.Kk,"%"),splitImageAspectRatio:"".concat(100*s.eo,"%"),splitImageFit:"cover",spacer:"2px"}}});var p=i(62708),m=i(93783),g=i(61964),f=i(49368),h=i(33990);const v=e=>{let{cardCarousel:t,surface:i,verticalPosition:a}=e;const l=(0,f.gm)(),d=t.template||"",{filteredItems:c,initialIndex:v,onSlidesDisplayed:S}=(0,p.Z)(t.carouselItems||[],i,d,a);if(!c.length)return null;const y=(0,g.N)(t),x=(0,g.f)(y),w=1===c.length,b=w?0:s.yf,I=w?0:t.shouldAutoScroll&&i===n.cx.HOME_FEED_ITEM?x||4e3:0;return(0,h.tZ)(m.K2,{children:(0,h.tZ)(m.qY,{$centerPadding:s.Ub,children:(0,h.tZ)(r.Z,{autoScrollInterval:I,initialIndex:v,slides:c,renderSlide:e=>{let{slide:t,carouselSlideProps:n}=e;return(0,h.tZ)(o.Z,{slides:c,template:d,slide:t,surface:i,verticalPosition:a,carouselSlideProps:n,eaterMessageStyles:u(0,d,l)})},onSlidesDisplayed:S,margin:b,dotsType:"disabled",overflowVisible:!0})})})};var S=i(36151),y=i(19474),x=i(29315),w=i(80311),b=i(1046);const I=e=>{var t;let{cardItem:i,surface:n,verticalPosition:a}=e;const[s,r]=(0,S.useState)(!1),o=(0,y.ZP)(),l=(0,S.useMemo)((()=>{var e;return{uuid:i.uuid||"",trackingID:(null===(e=i.metadata)||void 0===e?void 0:e.trackingID)||"",itemType:"cardItemPayload",verticalPosition:a}}),[i.uuid,null===(t=i.metadata)||void 0===t?void 0:t.trackingID,a]),d=(0,S.useMemo)((()=>({eaterMessage:{...l,surface:n}})),[l,n]);(0,S.useEffect)((()=>{o("eats:eater_message_view",d)}),[o,d]);const c=i.cardItem,u=e=>{e.stopPropagation(),e.preventDefault(),r(!0),o("eats:eater_message_dismiss",d)};switch(null==c?void 0:c.type){case"systemBanner":{var p;if(s)return null;const{systemBanner:e}=c,t=()=>(0,h.tZ)(w.Z,{dismissAction:u,systemBanner:e,systemBannerStyles:{getContentPadding:()=>({padding:"16px"})}});return(0,h.tZ)(b.Z,{messageKey:"system-banner",children:null!==(p=e.cta)&&void 0!==p&&p.action?(0,h.tZ)(x.ZP,{linkStyleType:x.co.BANNER,action:e.cta.action,actionTrackingID:e.cta.trackingID||"",surface:n,analytics:l,children:t()}):t()})}}return null};var E=i(43193),Z=i(97802),T=i(78204),D=i(60188),C=i(3045),P=i(47256);const z=(null===D.Z||void 0===D.Z?void 0:D.Z.innerWidth)||0,L=(0,Z.zo)("div",(e=>{let{$margin:t}=e;return{overflowX:"scroll",overflowY:"hidden",display:"flex",flexDirection:"row",alignItems:"flex-start",padding:"0 ".concat(16-t,"px"),WebkitOverflowScrolling:"touch",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"}}})),k=(0,Z.zo)("div",(e=>{let{$margin:t}=e;return{flexGrow:0,flexShrink:0,flexBasis:"calc(100vw - ".concat(32,"px)"),minWidth:0,margin:"0 ".concat(t,"px")}})),M=e=>{let{filteredItems:t,template:i,slide:n,surface:a,verticalPosition:r,htmlDirection:l,position:d}=e;const c=(0,P.d)();let p,m,g;switch(n.type){case"card":var f;({card:{uuid:p}}=n),m=null===(f=n.card.metadata)||void 0===f?void 0:f.trackingID,g=n.card.title,d=t.findIndex((e=>"card"===e.type&&e.card.uuid===p));break;case"advertisementCard":var v,S,y,x;({uuid:p}=null!==(v=n.advertisementCard.baseCard)&&void 0!==v?v:{}),m=null===(S=n.advertisementCard.baseCard)||void 0===S||null===(y=S.metadata)||void 0===y?void 0:y.trackingID,g=null===(x=n.advertisementCard.baseCard)||void 0===x?void 0:x.title,d=t.findIndex((e=>{var t;return"advertisementCard"===e.type&&(null===(t=e.advertisementCard.baseCard)||void 0===t?void 0:t.uuid)===p}));break;case"imageListCard":({imageListCard:{uuid:p,trackingID:m}}=n),d=t.findIndex((e=>"imageListCard"===e.type&&e.imageListCard.uuid===p))}const w=(0,C.Z)({eventName:"eats:eater_message_view",eventPayload:{eaterMessage:{position:d,verticalPosition:r,surface:a,template:i,uuid:p,itemType:"cardCarousel",trackingID:m,cardTitle:g,carouselSize:t.length},diningMode:c},intersectionObserverProps:{threshold:.5}});return(0,h.tZ)(k,{$margin:s.yf/2,ref:w,children:(0,h.tZ)(o.Z,{slides:t,template:i,slide:n,surface:a,verticalPosition:r,carouselSlideProps:{isDummy:!1,isVisible:!0},eaterMessageStyles:u(0,i,l)})})},$=e=>{let{cardCarousel:t,surface:i,verticalPosition:n}=e;const a=E.useRef(null),r=E.useRef(null),[o,l]=E.useState(!0),[d,c]=E.useState(0),u=(0,f.gm)(),m=t.template||"",{filteredItems:v}=(0,p.Z)(t.carouselItems||[],i,m,n),S=(0,g.N)(t),y=(0,g.f)(S)||4e3;return(0,T.Z)({swipeTargetRef:a,onSwipeMove:()=>{l(!1)},onSwipeEnd:()=>{}}),E.useEffect((()=>{a&&a.current&&a.current.scrollTo({left:d*(z-(s.yf+16)),behavior:"smooth"})}),[d]),E.useEffect((()=>{if(1!==v.length)return r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{o&&c((e=>(e+1)%v.length))}),y),()=>{null!=r&&r.current&&clearTimeout(null==r?void 0:r.current)}}),[o,d,y,v.length]),(0,h.tZ)(L,{$margin:s.yf/2,ref:a,children:v.map(((e,t)=>(0,h.tZ)(M,{position:t,filteredItems:v,template:m,slide:e,surface:i,verticalPosition:n,htmlDirection:u},t)))})};var A=i(78538);const R=e=>{let{eaterMessage:{payload:t,surfaceId:i},feedIndex:s=0}=e;const r=(0,a.F2)(),o=i===n.cx.HOME_FEED_ITEM?r.getString({...A.K.eats_web_continuous_scrolling,defaultValue:"control"}):"control";if(!t)return null;let l=null;switch(t.type){case"cardCarousel":l="control"===o?(0,h.tZ)(v,{cardCarousel:t.cardCarousel,surface:i||"",verticalPosition:s}):(0,h.tZ)($,{cardCarousel:t.cardCarousel,surface:i||"",verticalPosition:s});break;case"cardItemPayload":l=(0,h.tZ)(I,{cardItem:t.cardItemPayload,surface:i||"",verticalPosition:s})}return l?(0,h.tZ)(h.HY,{children:l}):null}},78204:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(36151);const a={swipeStart:null,swipeStartY:0,swipeOffset:0,lastSwipeStartTime:0,didLastSwipeStartAsTouch:!1,isSwipe:null};function s(e,t){let{x:i,y:n,timestamp:a}=t,s=e.isSwipe;if(e.swipeStart&&null===s&&a-e.lastSwipeStartTime>60){const t=Math.abs(i-e.swipeStart),a=Math.abs(n-e.swipeStartY);s=t>8&&a<50}return s}function r(e,t){switch(t.type){case"swipe start":return{isSwipe:null,swipeStart:t.x,swipeStartY:t.y,swipeOffset:0,lastSwipeStartTime:t.timestamp,didLastSwipeStartAsTouch:t.isTouch};case"swipe move":if(e.swipeStart){const{x:i,y:n,timestamp:a}=t;return{...e,swipeOffset:t.x-e.swipeStart,isSwipe:s(e,{x:i,y:n,timestamp:a})}}return e;case"swipe end":return a;default:throw new Error}}const o=e=>{e.cancelable&&e.preventDefault()};function l(e){let{swipeTargetRef:t,onSwipeEnd:i,onSwipeMove:l}=e;const d=!0,[c,u]=(0,n.useReducer)(r,a),p=(0,n.useCallback)((e=>{e instanceof TouchEvent&&1!==e.touches.length||u({type:"swipe start",x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,timestamp:e.timeStamp,isTouch:!0})}),[]),m=(0,n.useCallback)((e=>{if(e.preventDefault(),c.didLastSwipeStartAsTouch){if(Math.abs(e.timeStamp-c.lastSwipeStartTime)<200)return}u({type:"swipe start",x:e.pageX,y:e.pageY,timestamp:e.timeStamp,isTouch:!1})}),[c.didLastSwipeStartAsTouch,c.lastSwipeStartTime]),g=(0,n.useCallback)((e=>{if(e instanceof TouchEvent&&1!==e.touches.length)return;const{x:t,y:i}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};s(c,{x:t,y:i,timestamp:e.timeStamp})&&c.swipeStart&&l(t-c.swipeStart),u({type:"swipe move",x:t,y:i,timestamp:e.timeStamp})}),[c,l]),f=(0,n.useCallback)((e=>{if(e instanceof TouchEvent&&0!==e.touches.length)return;const{x:t,y:n}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};s(c,{x:t,y:n,timestamp:e.timeStamp})&&c.swipeStart&&i(t-c.swipeStart),u({type:"swipe end"})}),[c,i]);(0,n.useEffect)((()=>{const e=Math.abs(c.swipeOffset)>8&&d;return e&&document.addEventListener("touchmove",o,{passive:!1}),()=>{e&&document.removeEventListener("touchmove",o,{passive:!1})}}),[c.swipeOffset,d]),(0,n.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchstart",p,{passive:!0}),e.addEventListener("mousedown",m)),()=>{e&&(e.removeEventListener("touchstart",p,{passive:!0}),e.removeEventListener("mousedown",m))}}),[t,p,m]),(0,n.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchmove",g,{passive:!1}),e.addEventListener("touchend",f,{passive:!0})),()=>{e&&(e.removeEventListener("touchmove",g,{passive:!1}),e.removeEventListener("touchend",f,{passive:!0}))}}),[t,g,f,d]),(0,n.useEffect)((()=>{const e=c.swipeStart&&!c.didLastSwipeStartAsTouch;return e&&(document.addEventListener("mousemove",g),document.addEventListener("mouseup",f)),()=>{e&&(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",f))}}),[c.swipeStart,c.didLastSwipeStartAsTouch,g,f])}}}]);