"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[86134],{37143:(t,e,i)=>{i.d(e,{Z:()=>v});var o=i(44815),a=i(58980),n=i(72403),r=i(25070);const s=18,u=Array(9).fill("1").join(""),d=t=>{var e;const i=(null!==(e=t.match(/.{1,2}/g))&&void 0!==e?e:[]).map((t=>Number(t).toString(16)));i.splice(8,0,"-"),i.splice(13,0,"-"),i.splice(18,0,"-"),i.splice(23,0,"-");const o=i.join("");return(t=>(0,r.Z)(t))(o)?o:null},l=t=>{const e={storeUuid:void 0,lat:void 0,lng:void 0};if(!(t=>"string"==typeof t&&82===t.length&&/^\d+$/.test(t))(t))return e;const i=t.slice(0,s),o=t.slice(s,82),a=d(o),[n,r]=(t=>{var e;const[i,o]=null!==(e=t.match(new RegExp(".{1,".concat(9,"}"),"g")))&&void 0!==e?e:[void 0,void 0];if(i===u||o===u)return[null,null];const[a,n]=[i,o].map((t=>{if(t)return("1"===t[0]?1:-1)*(Number(t.slice(1))/1e5)}));return(t=>t>=-90&&t<=90)(a)&&(t=>t>=-180&&t<=180)(n)?[a,n]:[void 0,void 0]})(i);return"string"==typeof a&&void 0!==n&&void 0!==r?{storeUuid:a,lat:n,lng:r}:e};var c=i(14613),m=i(16688),p=i(21270);const v=()=>{const t=(0,m.Z)("canonical_pdp_google_ads"),e=(0,a.TH)(),i=(0,p.Z)();if(!t)return{isGoogleAd:!1,lat:void 0,lng:void 0,storeUuid:void 0};const r=o.parse(e.search),s=(0,c.u)(r[n.FSm.googleAdRegionId]),u=i.get(s),{lat:d,lng:v,storeUuid:I}=l(s);return!u&&s&&void 0!==I&&void 0!==d&&void 0!==v?{isGoogleAd:!0,lat:d,lng:v,storeUuid:I}:{isGoogleAd:!1,lat:void 0,lng:void 0,storeUuid:void 0}}},6727:(t,e,i)=>{i.d(e,{Z:()=>B});var o=i(36151),a=i(7903),n=i(23773),r=i(72403),s=i(2429),u=i(14760),d=i(73901),l=i(29213),c=i(91250),m=i(52269),p=i(31808),v=i(93453),I=i(845),S=i(60735),g=i(51630),U=i(20567),y=i(45531),f=i(59283),P=i(11183),h=i(84272),O=i(17542),C=i(84321),b=i(4361);const A=[i(96551).fn.STORES_WITH_PRODUCT],D=t=>{var e;let{canonicalProduct:i,storeItem:o,isDeliveryLocationSet:a}=t;if(!(i.hasLoaded&&o.hasLoaded&&i.data&&o.data))return i;const n=(t=>{let{canonicalProduct:e,storeItem:i}=t;return[...(i.productDetailsItems||[]).filter((t=>!A.includes(t.type))),...((null==e?void 0:e.productDetailsItems)||[]).filter((t=>A.includes(t.type)))]})({canonicalProduct:i.data,storeItem:o.data}),r={...o.data,title:null===(e=i.data)||void 0===e?void 0:e.title,itemDescription:i.data.itemDescription,imageUrl:i.data.imageUrl,images:i.data.images,nutritionalInfo:i.data.nutritionalInfo,productDetailsItems:n};return{...i,data:r}},L=t=>{var e,i,o,a,n;let{canonicalProduct:r,storeUuid:s,isDeliveryLocationSet:u,isGoogleAd:d}=t;if(!r.hasLoaded||!r.data)return r;const l=(0,b.vu)(null==r||null===(e=r.data)||void 0===e?void 0:e.productDetailsItems),c=(u||d?null:((t,e)=>{var i;return(null===(i=((null==t?void 0:t.storesWithProduct)||[]).reduce(((t,i)=>{let{minPrice:o,storeWithProduct:a}=t;const n=e[(null==i?void 0:i.itemUuid)||""],r=(null==n?void 0:n.price)||null;return"number"!=typeof o||"number"!=typeof r||r<o?{minPrice:r,storeWithProduct:i}:{minPrice:o,storeWithProduct:a}}),{minPrice:null,storeWithProduct:null}).storeWithProduct)||void 0===i?void 0:i.storeUuid)||null})(l,(null===(i=r.data)||void 0===i?void 0:i.storeItemsMap)||{}))||s||(null==l?void 0:l.defaultSelectedStoreUuid);if(!c)return r;const m=null==l||null===(o=l.storesWithProduct)||void 0===o?void 0:o.find((t=>{let{storeUuid:e}=t;return e===c})),p=(null==m?void 0:m.itemUuid)||"",v={...r,data:(null===(a=r.data)||void 0===a||null===(n=a.storeItemsMap)||void 0===n?void 0:n[p])||null};return D({canonicalProduct:r,storeItem:v,isDeliveryLocationSet:u})};var Z=i(28817),E=i(21954),T=i(37143),k=i(16688),M=i(58980),G=i(30134),Q=i(46759),q=i(83832);const B=function(){var t,e,i,b;let{shouldNavigateBackToStoreOnItemAdd:A=!0,canonicalItemStoreUuid:D,productUuid:B,itemParams:_,editItemParams:w}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const R=Boolean(D||B),V=(0,a.UO)(),N=(0,M.TH)(),{previousContext:z}=N.state||{},[F,W]=(0,o.useState)(!1),[x,H]=(0,o.useState)(""),{primaryBundledStoreUuid:J}=(0,q.Z)();let K,X,j,Y,$;if(_)K=_.storeUuid,X=_.itemUuid,j=_.sectionUuid,Y=_.subsectionUuid,$=_.primaryBundledStoreUuid;else{const t=(0,r.x9r)(V);K=t.storeUuid,X=t.itemUuid,j=t.sectionUuid,Y=t.subsectionUuid,$=J}const tt=null!=D?D:K,et=B||X,it=Boolean(et&&(R||tt&&j&&Y)),{shouldGetStore:ot,getStore:at,store:nt}=(0,s.Z)(tt),{partialMenuItem:rt}=(0,d.Z)(nt,tt,j,Y,et),st=(0,v.k)(),ut=(0,P.I0)(),dt=(t,e,i)=>{st(Boolean(t),e,i,nt,A,R),ut((0,h.AA)(et))},{isGoogleAd:lt,storeUuid:ct,lat:mt,lng:pt}=(0,T.Z)(),vt=(0,k.Z)("canonical_pdp_google_ads"),It=vt&&lt&&null!==mt&&null!==pt,St=vt&&ct||"",gt=R?Q.kf.CANONICALPRODUCT:z===G.x9.PDP_CROSS_SELL?Q.kf.CROSS_SELL:Q.kf.ITEM,{diningMode:Ut}=(0,E.Z)(tt),yt=(0,C.hn)((0,O.A)({itemRequestType:gt,storeUuid:R?St:tt,sectionUuid:R?"":j,subsectionUuid:R?"":Y,menuItemUuid:et,diningMode:Ut,cbType:"EATER_ENDORSED",...$?{primaryBundledStoreUuid:$}:{},...It?{googleAdLocation:{lat:mt,lng:pt}}:{}},{preparedId:"mobile-menu-item",queryObserverOptions:{enabled:it}})),ft=(0,Z.Z)(),Pt=Boolean(ft&&"geolocation_api"!==(null==ft?void 0:ft.originType)),ht=(0,o.useMemo)((()=>R?L({canonicalProduct:yt,storeUuid:tt,isDeliveryLocationSet:Pt,isGoogleAd:lt}):yt),[yt,tt,Pt,R,lt]),{outOfItemAction:Ot,updateOutOfItemAction:Ct,backupProduct:bt,updateBackupProduct:At,specialInstructions:Dt}=(0,f.Z)(),{quantity:Lt,updateQuantity:Zt,decimalQuantity:Et,specialInstructions:Tt,updateSpecialInstructions:kt,updateCustomizations:Mt,selectedCustomizations:Gt,itemsUpsell:Qt,updateUpsellItemQuantity:qt,hasErrors:Bt,isOnSale:_t,totalPrice:wt,discountedPrice:Rt,firstIncompleteGroup:Vt,spendingLimitError:Nt,canEditGroupOrderCart:zt}=(0,l.ZP)({store:nt,menuItem:ht,...w});(0,o.useEffect)((()=>{Ot&&"string"==typeof Dt&&Dt!==Tt&&kt(Dt)}),[Ot,Tt,Dt,kt]);const Ft=(0,o.useCallback)((t=>{kt(t)}),[kt]),{addToCart:Wt,didAddItem:xt}=(0,c.Z)({store:nt,menuItem:ht,selectedCustomizations:Gt,quantity:Lt,specialInstructions:Tt,outOfItemAction:Ot,onAddedToCart:dt,decimalQuantity:Et,backupProduct:bt,productUuid:R?B:null}),Ht=(0,m.Z)(),{isDraftOrderParticipantForStore:Jt}=(0,p.Z)((null===(t=nt.data)||void 0===t?void 0:t.uuid)||"");(0,u.Z)((()=>ot?at():null),[ot,at],"menu-item-store");const Kt=(0,n.T)(),Xt=(0,g.Z)(),jt=(0,I.Z)(),Yt=jt,$t=Yt.scheduled?Kt("shared.notAvailable.dateAndTimeRange",{date:(0,S.p6)(Xt,Yt.date),startTime:(0,S.CJ)(Xt,Yt.startTime),endTime:(0,S.CJ)(Xt,Yt.endTime)}):null===(e=nt.data)||void 0===e?void 0:e.closedMessage,te=(0,y.Z)(),ee=(0,U.Z)({storeUuid:null===(i=nt.data)||void 0===i?void 0:i.uuid}),ie=Boolean((null===(b=nt.data)||void 0===b?void 0:b.uuid)&&!_t&&!te&&!ee);return{isDraftOrderParticipantForStore:Jt,store:nt,menuItem:ht,didAddItem:xt,partialMenuItem:rt,quantity:Lt,decimalQuantity:Et,updateQuantity:Zt,specialInstructions:Tt,updateSpecialInstructions:Ft,updateCustomizations:Mt,selectedCustomizations:Gt,itemsUpsell:Qt,hasErrors:Bt,isOnSale:_t,totalPrice:wt,discountedPrice:Rt,addToCart:Wt,firstIncompleteGroup:Vt,spendingLimitError:Nt,canEditGroupOrderCart:zt,isDeliveryLocationSet:Pt,setDeliveryLocation:t=>{t&&!F&&(Ht(t),W(!0))},incompleteSubmissionState:x||"",setIncompleteSubmissionState:t=>{H(t)},outOfItemAction:Ot,updateUpsellItemQuantity:qt,updateOutOfItemAction:Ct,showClosedRestaurantUX:ie,storeUnavailableMessage:$t||"",backupProduct:bt,updateBackupProduct:At}}},86134:(t,e,i)=>{i.d(e,{ZP:()=>C,e3:()=>O});var o=i(36151),a=i(7903),n=i(72403),r=i(19832),s=i(6727),u=i(80148),d=i(84586),l=i(10086),c=i(4361),m=i(43193),p=i(16688);const v=t=>{var e,i,o;const a=(0,p.Z)("item_variants"),{menuItem:n}=t,[r,s]=m.useState(t),u=r.menuItem.data||n.data,d=null!==(0,c.Ju)(null!==(e=null==u?void 0:u.productDetailsItems)&&void 0!==e?e:[]);a&&n.hasLoaded&&(null===(i=n.data)||void 0===i?void 0:i.uuid)!==(null===(o=r.menuItem.data)||void 0===o?void 0:o.uuid)&&d&&s(t);const l=!n.hasLoaded&&(null==r?void 0:r.menuItem.hasLoaded)&&d;return a?{hasVariantOptions:d,isSwitchingVariantOptions:l,values:l?r:t}:{hasVariantOptions:!1,isSwitchingVariantOptions:!1,values:t}};var I=i(28817),S=i(58980),g=i(42529),U=i(88655),y=i(33990);const f={...u.E},P={...u.E},h=o.createContext({isCanonicalProduct:!1,isSwitchingStores:!1,isSwitchingVariantOptions:!1,canonicalItemStoreUuid:null,setCanonicalItemStoreUuid:r.Z,isUnavailableNearby:!1,productUuid:null,menuItem:f,hasVariantOptions:!1,quantity:1,partialMenuItem:null,store:P,updateQuantity:(t,e)=>{},specialInstructions:"",updateSpecialInstructions:t=>{},updateCustomizations:t=>{},selectedCustomizations:{},hasErrors:!1,isOnSale:!0,totalPrice:0,discountedPrice:0,addToCart:t=>{let{isStartingNewOrder:e,eventSource:i}=t},isDeliveryLocationSet:!0,setDeliveryLocation:t=>{},firstIncompleteGroup:"",incompleteSubmissionState:"",setIncompleteSubmissionState:t=>{},outOfItemAction:null,updateOutOfItemAction:t=>{},updateUpsellItemQuantity:(t,e)=>{},itemsUpsell:d.E,spendingLimitError:null,canEditGroupOrderCart:!1,showClosedRestaurantUX:!1,storeUnavailableMessage:"",backupProduct:null,updateBackupProduct:t=>{},decimalQuantity:(0,l.J2)(1,0),didAddItem:!1,isDraftOrderParticipantForStore:!1,itemParams:void 0});function O(){const t=o.useContext(h);if(null!==t)return t;throw Error("You should use useProductDetailsContext only in a descendant of ProductDetailsProvider")}const C=function(t){let{children:e,navigateBackOnItemAdd:i=!1,itemParams:r,editItemParams:u}=t;const d=(0,I.Z)(),[l,m]=o.useState(null),[p,f]=o.useState(null),P=(0,a.UO)(),{productUuid:O}=(0,n.hNc)(P),C=(0,S.TH)(),b=(0,g.ip)({...U.v.eats_web_store_shopping_list,defaultValue:!1}),{entryPoint:A}=(0,n.RAN)(C,["entryPoint"]),D=Boolean(O),L=(0,s.Z)({shouldNavigateBackToStoreOnItemAdd:b&&"shoppingList"===A||i,canonicalItemStoreUuid:l,productUuid:O,itemParams:r,editItemParams:u}),{hasVariantOptions:Z,isSwitchingVariantOptions:E,values:{partialMenuItem:T,store:k,menuItem:M,quantity:G,updateQuantity:Q,specialInstructions:q,updateSpecialInstructions:B,updateCustomizations:_,selectedCustomizations:w,hasErrors:R,isOnSale:V,totalPrice:N,discountedPrice:z,addToCart:F,isDeliveryLocationSet:W,setDeliveryLocation:x,firstIncompleteGroup:H,incompleteSubmissionState:J,setIncompleteSubmissionState:K,outOfItemAction:X,updateOutOfItemAction:j,updateUpsellItemQuantity:Y,itemsUpsell:$,spendingLimitError:tt,canEditGroupOrderCart:et,showClosedRestaurantUX:it,storeUnavailableMessage:ot,backupProduct:at,updateBackupProduct:nt,decimalQuantity:rt,didAddItem:st,isDraftOrderParticipantForStore:ut}}=v(L),[dt,lt]=o.useState(k);o.useEffect((()=>{var t,e;D&&k.hasLoaded&&(null===(t=k.data)||void 0===t?void 0:t.uuid)!==(null===(e=dt.data)||void 0===e?void 0:e.uuid)&&lt(k)}),[D,k,dt,lt]);const ct=!k.hasLoaded&&dt.hasLoaded;if(D&&M.hasLoaded&&M.data){var mt;const t=(0,c.vu)(null==M||null===(mt=M.data)||void 0===mt?void 0:mt.productDetailsItems),e=null==t?void 0:t.defaultSelectedStoreUuid;p!==d&&e!==l&&(m(e),f(d))}const pt=D&&W&&!l;return(0,y.tZ)(h.Provider,{value:{isCanonicalProduct:D,isSwitchingStores:ct,canonicalItemStoreUuid:l,setCanonicalItemStoreUuid:m,isSwitchingVariantOptions:E,isUnavailableNearby:pt,productUuid:O,menuItem:M,hasVariantOptions:Z,quantity:G,partialMenuItem:T,store:D?dt:k,updateQuantity:Q,specialInstructions:q,updateSpecialInstructions:B,updateCustomizations:_,selectedCustomizations:w,hasErrors:R,isOnSale:V,totalPrice:N,discountedPrice:z,addToCart:F,isDeliveryLocationSet:W,setDeliveryLocation:x,firstIncompleteGroup:H,incompleteSubmissionState:J,setIncompleteSubmissionState:K,outOfItemAction:X,updateOutOfItemAction:j,updateUpsellItemQuantity:Y,itemsUpsell:$,spendingLimitError:tt,canEditGroupOrderCart:et,showClosedRestaurantUX:it,storeUnavailableMessage:ot,backupProduct:at,updateBackupProduct:nt,decimalQuantity:rt,didAddItem:st,isDraftOrderParticipantForStore:ut,itemParams:r},children:e})}},73901:(t,e,i)=>{i.d(e,{Z:()=>r});var o=i(36151),a=i(52955),n=i(31850);const r=(t,e,i,r,s)=>{const u=(0,a.Z)(e);return{partialMenuItem:(0,o.useMemo)((()=>{if(s&&u){const e=u[s];return e?{title:e.title||"",description:e.itemDescription||"",imageUrl:e.imageUrl||"",endorsement:null,isGrocery:!!t.data&&(0,n.A)(t.data)}:null}if(s&&t&&i){var e;const o=null===(e=t.data)||void 0===e?void 0:e.sectionEntitiesMap[i];if(!o)return null;const a=o[s];return a?{title:a.title||"",description:a.itemDescription||"",imageUrl:a.imageUrl||"",endorsement:a.endorsement,classifications:a.classifications,isGrocery:!!t.data&&(0,n.A)(t.data)}:null}return null}),[u,s,i,t])}}},17542:(t,e,i)=>{i.d(e,{A:()=>s});var o=i(17211),a=i(92614),n=i(93026),r=i(14760);function s(t,e){var i,s;const u=(0,n.Z)("getMenuItemV1"),d=(0,o.useQueryClient)(),l=(0,a.H)("getMenuItemV1",t),c=(0,o.useQuery)({queryKey:l,queryFn:t=>{let{queryKey:e}=t;return u.request("getMenuItemV1",e[1])},...null==e?void 0:e.queryObserverOptions}),m=Boolean(null===(i=null===(s=e.queryObserverOptions)||void 0===s?void 0:s.enabled)||void 0===i||i);return(0,r.Z)((()=>!c.isFetched&&m?d.prefetchQuery({queryKey:l,queryFn:t=>{let{queryKey:e}=t;return u.request("getMenuItemV1",e[1])}}):null),[c,u,l,d,m],e.preparedId),c}}}]);